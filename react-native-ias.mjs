function e(e){return"function"==typeof e}function t(t){let{storyManager:r,appearanceManager:s,feed:i,onLoadStart:n,onLoadEnd:o,testKey:a,viewModelExporter:l}=t,[d,c]=fe(null);ge((()=>{if(null!=r&&null!=s){let{widget:t,widgetLoadedPromise:d}=r.createWidgetStoriesList(s,i,a);t.on(Ye.START_LOADER,(()=>{n&&e(n)&&n()})),t.on(Ye.END_LOADER,(t=>{o&&e(o)&&o(t)})),c(t),null!=l&&e(l)&&l(t),d.then((()=>{r.loadStoriesListData(t,s)}))}return()=>{d&&d.destructor()}}),[]);let u=me((e=>{null!=e&&null!=d&&(null==d||d.createRpcServer(e))}),[d]),[h,p]=fe(!1),f=ye({dx:0,dy:0}).current,g=ye(we.create({onPanResponderTerminationRequest:()=>!0,onPanResponderReject(){f.dx=f.dy=0},onPanResponderRelease(){f.dx=f.dy=0},onPanResponderTerminate(){f.dx=f.dy=0},onPanResponderEnd(){f.dx=f.dy=0},onMoveShouldSetPanResponder:(e,t)=>{if(Math.abs(t.dx)>Math.abs(t.dy)&&Math.abs(t.vx)>Math.abs(t.vy))return f.dx=f.dy=0,!0;f.dx=f.dx+Math.abs(t.dx),f.dy=f.dy+Math.abs(t.dy);let r=f.dx>=15||f.dy>=15,s=Math.abs(f.dx)>=Math.abs(f.dy)&&r;return!s&&r&&(f.dx=f.dy=0),s},onShouldBlockNativeResponder:()=>!0})).current;return pe.createElement(pe.Fragment,null,d&&pe.createElement(Le,Object.assign({},null==d?void 0:d.containerOptions,{onLayout:e=>{var t;let{nativeEvent:r}=e;null!=r&&null!==(t=r.layout)&&void 0!==t&&t.width?p(!0):p(!1)}}),h&&pe.createElement(Ve,Object.assign({scrollEnabled:!1,bounces:!1,showsVerticalScrollIndicator:!1,showsHorizontalScrollIndicator:!1,overScrollMode:"never",nestedScrollEnabled:!1},null==d?void 0:d.viewOptions,{ref:u},'android'===ve.OS?g.panHandlers:{}))))}function r(e){let{storyManager:t}=e,[r,s]=fe(null),[i,n]=fe(!1),[o,a]=fe(!1),l=ye(null),[d,c]=fe(null);ge((()=>{null===r&&null!=t&&(s(t.createWidgetStoryReader(n,a,(e=>{null==e||e.destroyRpcServer(),null==e||e.destructor(),c(null),s(null),n(!1)}))),c(!1)),!1===d&&null!==l.current&&(null==r||r.createRpcServer(l.current),c(!0))}));let[u,h]=fe(!1);return pe.createElement(pe.Fragment,null,r&&i&&pe.createElement(Ce,{style:{...et.container,backgroundColor:"transparent"}},pe.createElement(be,{barStyle:"light-content",backgroundColor:"#000"}),pe.createElement(Le,Object.assign({},null==r?void 0:r.containerOptions,{onLayout:e=>{var t;let{nativeEvent:r}=e;null!=r&&null!==(t=r.layout)&&void 0!==t&&t.width?h(!0):h(!1)}}),u&&pe.createElement(Ve,Object.assign({},null==r?void 0:r.viewOptions,{ref:l})))),o&&pe.createElement(Le,{style:{...et.container,backgroundColor:"#000"}},pe.createElement(Re,{size:"large",color:"ios"===ve.OS?"#999999":"#ffffff"})))}function s(e){let{storyManager:t}=e,[r,s]=fe(null),[i,n]=fe(!1),[o,a]=fe(!1),l=ye(null),[d,c]=fe(null);ge((()=>{null===r&&null!=t&&(s(t.createWidgetStoryFavoriteReader(n,a,(e=>{null==e||e.destroyRpcServer(),null==e||e.destructor(),c(null),s(null),n(!1)}))),c(!1)),!1===d&&null!==l.current&&(null==r||r.createRpcServer(l.current),c(!0))}));let[u,h]=fe(!1);return pe.createElement(pe.Fragment,null,r&&i&&pe.createElement(Ce,{style:{...tt.container,backgroundColor:"#000"}},pe.createElement(be,{barStyle:"light-content",backgroundColor:"#000"}),pe.createElement(Le,Object.assign({},null==r?void 0:r.containerOptions,{onLayout:e=>{var t;let{nativeEvent:r}=e;null!=r&&null!==(t=r.layout)&&void 0!==t&&t.width?h(!0):h(!1)}}),u&&pe.createElement(Ve,Object.assign({},null==r?void 0:r.viewOptions,{ref:l})))),o&&pe.createElement(Le,{style:{...tt.container,backgroundColor:"#000"}},pe.createElement(Re,{size:"large",color:ve.select({ios:"#999999",android:"#ffffff"})})))}function i(e){let{storyManager:t}=e;return pe.createElement(pe.Fragment,null,pe.createElement(s,{storyManager:t}),pe.createElement(r,{storyManager:t}))}function n(){}function o(){o.init.call(this)}function a(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function l(e,t,r){if(t)e.call(r);else for(var s=e.length,i=m(e,s),n=0;n<s;++n)i[n].call(r)}function d(e,t,r,s){if(t)e.call(r,s);else for(var i=e.length,n=m(e,i),o=0;o<i;++o)n[o].call(r,s)}function c(e,t,r,s,i){if(t)e.call(r,s,i);else for(var n=e.length,o=m(e,n),a=0;a<n;++a)o[a].call(r,s,i)}function u(e,t,r,s,i,n){if(t)e.call(r,s,i,n);else for(var o=e.length,a=m(e,o),l=0;l<o;++l)a[l].call(r,s,i,n)}function h(e,t,r,s){if(t)e.apply(r,s);else for(var i=e.length,n=m(e,i),o=0;o<i;++o)n[o].apply(r,s)}function p(e,t,r,s){var i,o,l,d;if('function'!=typeof r)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit('newListener',t,r.listener?r.listener:r),o=e._events),l=o[t]):(o=e._events=new n,e._eventsCount=0),l){if('function'==typeof l?l=o[t]=s?[r,l]:[l,r]:s?l.unshift(r):l.push(r),!l.warned&&(i=a(e))&&i>0&&l.length>i){l.warned=!0;var c=new Error('Possible EventEmitter memory leak detected. '+l.length+' '+t+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name='MaxListenersExceededWarning',c.emitter=e,c.type=t,c.count=l.length,d=c,'function'==typeof console.warn?console.warn(d):console.log(d)}}else l=o[t]=r,++e._eventsCount;return e}function f(e,t,r){function s(){e.removeListener(t,s),i||(i=!0,r.apply(e,arguments))}var i=!1;return s.listener=r,s}function g(e){var t=this._events;if(t){var r=t[e];if('function'==typeof r)return 1;if(r)return r.length}return 0}function m(e,t){for(var r=new Array(t);t--;)r[t]=e[t];return r}function y(e,t,r,s){(Ct(e)||bt(e))&&('family'in e||'graphite'in e)||Lt(`${t}: expect ${r} to be a unit (store, event or effect)${s}`)}function v(e,t,r){if(Array.isArray(e))for(let s=0;s<e.length;s++)y(e[s],t,`${s} item of ${r}`,'');else y(e,t,r,' or array of units')}function S({node:e=[],from:t,source:r,parent:s=t||r,to:i,target:n,child:o=i||n,scope:a={},meta:l={},family:d={type:'regular'},regional:c}={}){let u=nr(s),h=nr(d.links),p=nr(d.owners),f=[],g={};for(let t=0;t<e.length;t++){let r=e[t];r&&(f.push(r),or(r,g))}let m={id:It(),seq:f,next:nr(o),meta:l,scope:a,family:{type:d.type||"crosslink",links:h,owners:p},reg:g};for(let e=0;e<h.length;e++)Gt(h[e]).push(m);for(let e=0;e<p.length;e++)Kt(p[e]).push(m);for(let e=0;e<u.length;e++)u[e].next.push(m);return c&&rr&&tr(Xt(rr),[m]),m}function w(e,t,r){let s=Sr,i=null,n=mr;if(e.target&&(t=e.params,r=e.defer,s='page'in e?e.page:s,e.stack&&(i=e.stack),n=er(e)||n,e=e.target),n&&mr&&n!==mr&&(mr=null),Array.isArray(e))for(let r=0;r<e.length;r++)hr('pure',s,qt(e[r]),i,t[r],n);else hr('pure',s,qt(e),i,t,n);if(r&&!yr)return;let o,a,l,d,c,u,h={isRoot:yr,currentPage:Sr,forkPage:mr,isWatch:vr};yr=0;e:for(;d=ur();){let{idx:e,stack:t,type:r}=d;l=t.node,Sr=c=t.page,mr=er(t),u=(c||l).reg;let s={fail:0,scope:l.scope};o=a=0;for(let i=e;i<l.seq.length&&!o;i++){let n=l.seq[i],d=n.data;switch(n.type){case"barrier":{let s=d.barrierID;c&&(s=`${c.fullID}_${s}`);let n=d.priority;if(i!==e||r!==n){gr.has(s)||(gr.add(s),pr(i,t,n,s));continue e}gr.delete(s);break}case'mov':{let e;switch(d.from){case"stack":e=Xt(t);break;case"a":case'b':e=t[d.from];break;case"value":e=d.store;break;case ut:u[d.store.id]||(t.page=c=Cr(c,d.store.id),u=c?c.reg:l.reg),e=Wt(u[d.store.id])}switch(d.to){case"stack":t.value=e;break;case"a":case'b':t[d.to]=e;break;case ut:br(c,l,d.target.id).current=e}break}case'check':switch(d.type){case'defined':a=void 0===Xt(t);break;case'changed':a=Xt(t)===Wt(br(c,l,d.store.id))}break;case"filter":a=!Rr(s,d,t);break;case'run':if(i!==e||"effect"!==r){pr(i,t,"effect");continue e}case'compute':vr='watch'===l.meta.op,t.value=Rr(s,d,t),vr=h.isWatch}o=s.fail||a}if(!o)for(let e=0;e<l.next.length;e++)hr('child',c,l.next[e],t,Xt(t),er(t))}yr=h.isRoot,Sr=h.currentPage,mr=er(h)}function L(e,t="combine"){let r=t+'(',s='',i=0;for(let t in e){let n=e[t];if(null!=n&&(r+=s,r+=ft(n)?n.compositeName.fullName:n.toString()),i+=1,25===i)break;s=', '}return r+=')',r}function C(e,t){for(let r in e)t(e[r],r)}function b(e,t){let r=(e,...t)=>Sr?((e,t,r,s)=>{let i=Sr,n=null;if(t)for(n=Sr;n&&n.template!==t;)n=Qt(n);Lr(n);let o=e.create(r,s);return Lr(i),o})(r,s,e,t):r.create(e,t);r.graphite=S({meta:Ur("event",r,t,e),regional:1}),r.create=e=>(w(mr?mr.find(r):r,e),e),r.watch=Et(Nr,r),r.map=e=>{let t,s;Ct(e)&&(t=e,s=e.name,e=e.fn);let i=b(_r(r,s),t);return Vr(r,i,pt,e),i},r.filter=e=>qr(r,"filter",e.fn?e:e.fn,[Ht({fn:Vt})]),r.filterMap=e=>qr(r,'filterMap',e,[Dt({fn:Vt}),xt.defined()]),r.prepend=e=>{let t=b('* \u2192 '+r.shortName,{parent:Qt(r)}),s=sr();return s&&qt(t).seq.push(s.upward),Vr(t,r,'prepend',e),Wr(r,t),t};let s=sr();return r}function R(e,t){function r(e,t){l.off(e),Yt(l).set(e,xr(Gr(e,l,'on',1,t,c)))}let s=jt(e),i=jt(e),n=$r('updates'),o=sr();s.after=[{type:'copy',to:i}],o&&o.plain.push(s,i);let a=s.id,l={subscribers:new Map,updates:n,defaultState:e,stateRef:s,getState(){let e,t=s;if(Sr){let t=Sr;for(;t&&!t.reg[a];)t=Qt(t);t&&(e=t)}return!e&&mr&&mr.reg[a]&&(e=mr),e&&(t=e.reg[a]),Wt(t)},setState(e){let t;mr&&(t=mr.nodeMap[qt(l).id]),t||(t=l),w({target:t,params:e,defer:1})},reset(...e){for(let t of e)l.on(t,(()=>l.defaultState));return l},on(e,t){if(v(e,'.on','first argument'),Array.isArray(e))for(let s of e)r(s,t);else r(e,t);return l},off(e){let t=Yt(l).get(e);return t&&(t(),Yt(l).delete(e)),l},map(e,t){let r,i,n;Ct(e)&&(r=e,i=e.name,t=e.firstState,e=e.fn);let o=l.getState(),a=sr();a?n=null:void 0!==o&&(n=e(o,t));let d=R(n,{name:_r(l,i),config:r,strict:0}),c=Gr(l,d,pt,0,e);return Jt(d).before=[{type:pt,fn:e,from:s}],a&&(Er(a.plain,s)||Er(c.seq,a.loader)||c.seq.unshift(a.loader)),d},watch(e,t){if(!t||!ft(e)){let t=Nr(l,e),r=sr();return r?r.watch.push({of:s,fn:e}):e(l.getState()),t}return bt(t)||Lt('second argument should be a function'),e.watch((e=>t(l.getState(),e)))}},d=Ur(ut,l,t),c=l.defaultConfig.updateFilter;return l.graphite=S({scope:{state:s},node:[xt.defined(),xt.changed({store:i}),c&&Tt({store:i,to:"a"}),c&&Ht({fn:(e,t,{a:r})=>c(e,r)}),Bt({store:s}),Bt({store:i})],child:n,meta:d,regional:1}),jr&&void 0===e&&Lt("current state can't be undefined, use null instead"),tr(l,[n]),l}function k(e,t){let r=b(e,t),s=r.defaultConfig.handler||(()=>Lt(`no handler used in ${r.getType()}`)),i=qt(r);i.meta.onCopy=['runner'],i.meta.unit=r.kind="effect",r.use=e=>(bt(e)||Lt('.use argument should be a function'),s=e,r);let n=r.finally=$r('finally'),o=r.done=n.filterMap({named:'done',fn({status:e,params:t,result:r}){if('done'===e)return{params:t,result:r}}}),a=r.fail=n.filterMap({named:'fail',fn({status:e,params:t,error:r}){if('fail'===e)return{params:t,error:r}}}),l=r.doneData=o.map({named:'doneData',fn:({result:e})=>e}),d=r.failData=a.map({named:'failData',fn:({error:e})=>e}),c=S({scope:{getHandler:r.use.getCurrent=()=>s,finally:n},node:[Nt({fn({params:e,req:t},{finally:r,getHandler:s},i){let n,o=Jr({params:e,req:t,ok:1,anyway:r,stack:i}),a=Jr({params:e,req:t,ok:0,anyway:r,stack:i});try{n=s()(e)}catch(e){return void a(e)}Ct(n)&&bt(n.then)?n.then(o,a):o(n)}})],meta:{op:'fx',fx:'runner',onCopy:['finally']}});i.scope.runner=c,i.seq.push(Dt({fn:(e,t,r)=>Qt(r)?{params:e,req:{rs(e){},rj(e){}}}:e}),Nt({fn:(e,{runner:t},r)=>(w({target:t,params:e,defer:1,forkPage:er(r)}),e.params)})),r.create=e=>{let t=(()=>{let e={};return e.req=new Promise(((t,r)=>{e.rs=t,e.rj=r})),e.req.catch((()=>{})),e})(),s={params:e,req:t};if(mr){if(!vr){let e=mr;t.req.finally((()=>{wr(e)})).catch((()=>{}))}w(mr.find(r),s)}else w(r,s);return t.req};let u=r.inFlight=R(0,{named:'inFlight'}).on(r,(e=>e+1)).on(n,(e=>e-1)),h=r.pending=u.map({fn:e=>e>0,named:'pending'});return tr(r,[n,o,a,l,d,h,u,c]),r}function _(...e){let[[t,r],s]=Ir(e),i={};return C(r,((e,r)=>{let n=i[r]=b(r,{parent:Qt(t),config:s});t.on(n,e),Wr(t,n)})),i}function O(e,t){let r=new Set,s=new Set,i=new Set,n=new Set,o=S({family:{type:"domain"},regional:1}),a={history:{domains:r,stores:s,effects:i,events:n},graphite:o};o.meta=Ur("domain",a,t,e);let[l,d,c,u]=['onEvent','onEffect','onStore','onDomain'].map($r);a.hooks={event:l,effect:d,store:c,domain:u},a.onCreateEvent=zr(l,n,a),a.onCreateEffect=zr(d,i,a),a.onCreateStore=zr(c,s,a),a.onCreateDomain=zr(u,r,a),a.createEvent=a.event=(e,t)=>l(b(e,{parent:a,config:t})),a.createEffect=a.effect=(e,t)=>d(k(e,{parent:a,config:t})),a.createDomain=a.domain=(e,t)=>O({name:e,parent:a,config:t}),a.createStore=a.store=(e,t)=>c(R(e,{parent:a,config:t}));let h=Qt(a);return h&&(C(a.hooks,((e,t)=>{Hr({from:e,to:h.hooks[t]})})),h.hooks.domain(a)),a}function I(e,t){let r=b(t||L(e,'merge'));return v(e,'merge','first argument'),Hr({from:e,to:r,meta:{op:'merge'}}),r}function E(e){return Array.isArray(e)}function A(e){let t=typeof e;return null!=e&&('object'===t||'function'===t)}function F(){if(!us&&!(us='undefined'!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||'undefined'!=typeof msCrypto&&'function'==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');return us(hs)}function M(e){return'string'==typeof e&&ps.test(e)}function P(e,t,r){var s=(e=e||{}).random||(e.rng||F)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){r=r||0;for(var i=0;i<16;++i)t[r+i]=s[i];return t}return function(e,t){var r=arguments.length>1&&void 0!==t?t:0,s=(fs[e[r+0]]+fs[e[r+1]]+fs[e[r+2]]+fs[e[r+3]]+'-'+fs[e[r+4]]+fs[e[r+5]]+'-'+fs[e[r+6]]+fs[e[r+7]]+'-'+fs[e[r+8]]+fs[e[r+9]]+'-'+fs[e[r+10]]+fs[e[r+11]]+fs[e[r+12]]+fs[e[r+13]]+fs[e[r+14]]+fs[e[r+15]]).toLowerCase();if(!M(s))throw TypeError('Stringified UUID is invalid');return s}(s)}function T(e,t){return{...e,...t}}function x(e){let t=e.length;for(let r=e.length-1;r>=0;r--){let s=e.charCodeAt(r);s>127&&s<=2047?t++:s>2047&&s<=65535&&(t+=2),s>=56320&&s<=57343&&r--}return t}function D(e){return[Object,Array].includes((e||{}).constructor)&&!Object.entries(e||{}).length}function H(e){return null!=e&&"string"==typeof e.valueOf()}function N(e){return'number'==typeof e}async function B(){let[e,t]=await Promise.all([_s(),Os()]);return{method:"post",url:"session/open",params:{expand:"cache"},data:ks(e,t)}}function j(e,t,r){void 0===t&&(t=!1);let s={url:`story/${e}`,method:"GET",params:{expand:['slides_html','slides_duration','slides_screenshot_share'].join(',')}};return t||s.params&&(s.params.fields=['id','slides_html','slides_duration','slides_screenshot_share'].join(',')),null!==r&&s.params&&(s.params.session_id=r),s}function W(e,t){let r={url:"story-context",method:"get",params:{id:e.join(',')}};return null!=t&&r.params&&(r.params.session_id=t),r}function U(e,t,r){return String(e).replace(new RegExp((e=>e.replace(/[.*+?^${}()|[\]\\]/g,'\\$&'))(t),'g'),(()=>r))}function $(e,t){let r=new Blob([e],{type:t});return URL.createObjectURL(r)}function V(e,t){return((e,t)=>new Hi(e,t))({fxSenderDomain:e.clientFxDomain,fxReceiverDomain:e.serverFxDomain},t)}function q(e){return e&&e.__esModule&&{}.hasOwnProperty.call(e,'default')?e.default:e}function G(e,t,r){var s=(void 0===r?{}:r).last,i=void 0!==s&&s;if('string'!=typeof e)throw new TypeError('expected a string');if(!Array.isArray(t))throw new TypeError('expected a string array of separators');if('boolean'!=typeof i)throw new TypeError('expected a Boolean value for options.last');for(var n=[],o='',a=!1,l=0,d=!1,c=!1,u=0,h=e;u<h.length;u++){var p=h[u];d?c?c=!1:'\\'===p?c=!0:p===d&&(d=!1):'"'===p||'\''===p?d=p:'('===p?l+=1:')'===p?l>0&&(l-=1):0===l&&-1!==t.indexOf(p)&&(a=!0),a?(''!==o&&n.push(o.trim()),o='',a=!1):o+=p}return(i||''!==o)&&n.push(o.trim()),n}function K(e){return!/^(-?\d|--)/.test(e)}function J(e){const t=[];let r="",s="",i=7;for(let n,o=0;n=e.charAt(o);o++)if(/[a-zA-Z\d\xa0-\uffff_-]/.test(n)&&7===i)r+=n;else if("\\"===n&&7===i)i=6;else if(" "===n&&7===i){if(""!==r){if(!K(r))return null;t.push(r),r=""}}else if(6===i)/[0-9a-f]/i.test(n)?(s+=n,i=8):(r+=n,i=7);else{if(8!==i)return null;/[0-9a-f]/i.test(n)&&s.length<6?s+=n:(r+=String.fromCodePoint(parseInt(s,16)),r+=n,s="",i=7)}if(""!==r){if(!K(r))return null;t.push(r)}return t.join(" ")}function Z(e,t){let r=t,s="";const i={"font-family":[]};for(let t,n=0;t=e.charAt(n);n+=1)if(4!==r||'"'!==t&&"'"!==t)if(3===r&&","===t)r=4,s="";else if(4===r&&","===t){const e=J(s);e&&i["font-family"].push(e),s=""}else if(5===r&&" "===t)/^(?:\+|-)?(?:[0-9]*\.)?[0-9]+(?:deg|grad|rad|turn)$/.test(s)?(i["font-style"]+=" "+s,s=""):n-=1,r=1;else if(1!==r||" "!==t&&"/"!==t)2===r&&" "===t?(/^(?:\+|-)?([0-9]*\.)?[0-9]+(?:em|ex|ch|rem|vh|vw|vmin|vmax|px|mm|cm|in|pt|pc|%)?$/.test(s)&&(i["line-height"]=s),r=4,s=""):s+=t;else{if(/^(?:(?:xx|x)-large|(?:xx|s)-small|small|large|medium)$/.test(s)||/^(?:larg|small)er$/.test(s)||/^(?:\+|-)?(?:[0-9]*\.)?[0-9]+(?:em|ex|ch|rem|vh|vw|vmin|vmax|px|mm|cm|in|pt|pc|%)$/.test(s))r="/"===t?2:4,i["font-size"]=s;else if(/^italic$/.test(s))i["font-style"]=s;else if(/^oblique$/.test(s))i["font-style"]=s,r=5;else if(/^small-caps$/.test(s))i["font-variant"]=s;else if(/^(?:bold(?:er)?|lighter|normal)$/.test(s))i["font-weight"]=s;else if(/^[+-]?(?:[0-9]*\.)?[0-9]+(?:e[+-]?(?:0|[1-9][0-9]*))?$/.test(s)){const e=parseFloat(s);e>=1&&e<=1e3&&(i["font-weight"]=s)}else/^(?:(?:ultra|extra|semi)-)?(?:condensed|expanded)$/.test(s)&&(i["font-stretch"]=s);s=""}else{let o=n+1;do{if(o=e.indexOf(t,o)+1,!o)return null}while("\\"===e.charAt(o-2));i["font-family"].push(e.slice(n+1,o-1).replace(/\\('|")/g,"$1")),n=o-1,r=3,s=""}if(3===r&&!/^\s*$/.test(s))return null;if(4===r){const e=J(s);e&&i["font-family"].push(e)}return i}function z(){Un&&Vn.setAdjustNothing()}function X(){Un&&Vn.setAdjustPan()}function Y(){Un&&Vn.setAdjustResize()}function Q(){Un&&Vn.setAdjustUnspecified()}function ee(){Un&&Vn.setAlwaysHidden()}function te(){Un&&Vn.setAlwaysVisible()}function re(){Un&&Vn.setVisible()}function se(){Un&&Vn.setHidden()}function ie(){Un&&Vn.setUnchanged()}function ne(e){Un&&Vn.getSoftInputMode(e)}function oe(e){Un&&Vn.setSoftInputMode(e)}function ae(e,t){return!1!==t.clone&&t.isMergeableObject(e)?ue(Array.isArray(e)?[]:{},e,t):e}function le(e,t,r){return e.concat(t).map((e=>ae(e,r)))}function de(e){return Object.keys(e).concat((e=>Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((t=>e.propertyIsEnumerable(t))):[])(e))}function ce(e,t){try{return t in e}catch(e){return!1}}function ue(e,t,r){(r=r||{}).arrayMerge=r.arrayMerge||le,r.isMergeableObject=r.isMergeableObject||Qn,r.cloneUnlessOtherwiseSpecified=ae;var s=Array.isArray(t);return s===Array.isArray(e)?s?r.arrayMerge(e,t,r):((e,t,r)=>{var s={};return r.isMergeableObject(e)&&de(e).forEach((t=>{s[t]=ae(e[t],r)})),de(t).forEach((i=>{((e,t)=>ce(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t)))(e,i)||(s[i]=ce(e,i)&&r.isMergeableObject(t[i])?((e,t)=>{if(!t.customMerge)return ue;var r=t.customMerge(e);return'function'==typeof r?r:ue})(i,r)(e[i],t[i],r):ae(t[i],r))})),s})(e,t,r):ae(t,r)}import'react-native-get-random-values';import*as he from'react';import pe,{useState as fe,useEffect as ge,useCallback as me,useRef as ye}from'react';import{Platform as ve,StyleSheet as Se,PanResponder as we,View as Le,SafeAreaView as Ce,StatusBar as be,ActivityIndicator as Re,Animated as ke,TouchableOpacity as _e,Image as Oe,Text as Ie,BackHandler as Ee,NativeModules as Ae,PermissionsAndroid as Fe,Linking as Me,InteractionManager as Pe}from'react-native';import{WebView as Te}from'react-native-webview';import xe from'./StoriesListClient.js';import De from'./StoriesListClient.css.js';import*as He from'react-native-device-info';import Ne from'@react-native-async-storage/async-storage';import Be from'./StoryReaderClient.js';import je from'./StoryReaderClient.css.js';import We from'./StoryFavoriteReaderClient.js';import Ue from'./StoryFavoriteReaderClient.css.js';const $e="android"===ve.OS;let Ve=pe.forwardRef(((e,t)=>{let{style:r,...s}=e;return pe.createElement(Te,Object.assign({nativeConfig:{props:{webviewDebuggingEnabled:!0,allowsInlineMediaPlayback:!0}},scalesPageToFit:!1,originWhitelist:["*"],automaticallyAdjustContentInsets:!1,keyboardDisplayRequiresUserAction:!1},s,{style:$e?[r,qe.opacityHack]:r,ref:t,forceDarkOn:!1,mediaPlaybackRequiresUserAction:!1,textZoom:100}))}));const qe=Se.create({opacityHack:{opacity:.99}});let Ge,Ke,Je,Ze,ze,Xe,Ye;(e=>{e.CENTER="center",e.LEFT="left",e.RIGHT="right"})(Ge||(Ge={})),(e=>{e.CIRCLE="circle",e.QUAD="quad",e.RECTANGLE="rectangle"})(Ke||(Ke={})),(e=>{e.LEFT="left",e.CENTER="center",e.RIGHT="right"})(Je||(Je={})),(e=>{e.CARD_INSIDE_BOTTOM="cardInsideBottom",e.CARD_OUTSIDE_TOP="cardOutsideTop",e.CARD_OUTSIDE_BOTTOM="cardOutsideBottom"})(Ze||(Ze={})),(e=>{e.START_LOADER="startLoader",e.END_LOADER="endLoader"})(ze||(ze={})),(e=>{e.CIRCLE="circle",e.QUAD="quad",e.RECTANGLE="rectangle"})(Xe||(Xe={})),(e=>{e.START_LOADER="startLoad",e.END_LOADER="endLoad"})(Ye||(Ye={}));const Qe={title:{content:'',color:'#ffffff',font:'normal',marginBottom:20},card:{title:{font:'normal',color:'#ffffff',padding:15,textAlign:Je.LEFT,position:Ze.CARD_INSIDE_BOTTOM,display:!0,lineClamp:3},gap:10,height:70,variant:Xe.CIRCLE,border:{radius:0,color:'black',width:2,gap:3},boxShadow:null,dropShadow:null,opacity:null,mask:{color:null},svgMask:null,opened:{border:{radius:null,color:null,width:null,gap:null},boxShadow:null,dropShadow:null,opacity:null,mask:{color:null},svgMask:null}},favoriteCard:{title:{content:'Favorite',font:'normal',color:'#000',padding:15,textAlign:Je.LEFT,position:Ze.CARD_INSIDE_BOTTOM,display:!0,lineClamp:3},gap:10,height:70,variant:Xe.CIRCLE,border:{radius:0,color:'black',width:2,gap:3},boxShadow:null,dropShadow:null,opacity:null,mask:{color:null},svgMask:null,opened:{border:{radius:null,color:null,width:null,gap:null},boxShadow:null,dropShadow:null,opacity:null,mask:{color:null},svgMask:null}},sidePadding:20,topPadding:20,bottomPadding:20,bottomMargin:17,layout:{height:0,storiesListInnerHeight:null,backgroundColor:'transparent',sliderAlign:Ge.LEFT},navigation:{showControls:!1,controlsSize:48,controlsBackgroundColor:'white',controlsColor:'black'}},et=Se.create({container:{flex:1,justifyContent:"center",alignItems:"center",position:"absolute",width:"100%",height:"100%"}}),tt=Se.create({container:{flex:1,justifyContent:"center",alignItems:"center",position:"absolute",width:"100%",height:"100%"}});let rt,st,nt,ot,at,lt,dt;n.prototype=Object.create(null),o.EventEmitter=o,o.usingDomains=!1,o.prototype.domain=void 0,o.prototype._events=void 0,o.prototype._maxListeners=void 0,o.defaultMaxListeners=10,o.init=function(){this.domain=null,o.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new n,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if('number'!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return a(this)},o.prototype.emit=function(e,t,r,s){var i,n,o,a,p,f,g,m='error'===e;if(f=this._events)m=m&&null==f.error;else if(!m)return!1;if(g=this.domain,m){if(i=t,!g){if(i instanceof Error)throw i;var y=new Error('Uncaught, unspecified "error" event. ('+i+')');throw y.context=i,y}return i||(i=new Error('Uncaught, unspecified "error" event')),i.domainEmitter=this,i.domain=g,i.domainThrown=!1,g.emit('error',i),!1}if(!(n=f[e]))return!1;var v='function'==typeof n;switch(o=arguments.length){case 1:l(n,v,this);break;case 2:d(n,v,this,t);break;case 3:c(n,v,this,t,r);break;case 4:u(n,v,this,t,r,s);break;default:for(a=new Array(o-1),p=1;p<o;p++)a[p-1]=arguments[p];h(n,v,this,a)}return!0},o.prototype.on=o.prototype.addListener=function(e,t){return p(this,e,t,!1)},o.prototype.prependListener=function(e,t){return p(this,e,t,!0)},o.prototype.once=function(e,t){if('function'!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,f(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){if('function'!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,f(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,s,i,o,a;if('function'!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(s=this._events))return this;if(!(r=s[e]))return this;if(r===t||r.listener&&r.listener===t)0==--this._eventsCount?this._events=new n:(delete s[e],s.removeListener&&this.emit('removeListener',e,r.listener||t));else if('function'!=typeof r){for(i=-1,o=r.length;o-- >0;)if(r[o]===t||r[o].listener&&r[o].listener===t){a=r[o].listener,i=o;break}if(i<0)return this;if(1===r.length){if(r[0]=void 0,0==--this._eventsCount)return this._events=new n,this;delete s[e]}else((e,t)=>{for(var r=t,s=r+1,i=e.length;s<i;r+=1,s+=1)e[r]=e[s];e.pop()})(r,i);s.removeListener&&this.emit('removeListener',e,a||t)}return this},o.prototype.off=function(e,t){return this.removeListener(e,t)},o.prototype.removeAllListeners=function(e){var t,r;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=new n,this._eventsCount=0):r[e]&&(0==--this._eventsCount?this._events=new n:delete r[e]),this;if(0===arguments.length){for(var s,i=Object.keys(r),o=0;o<i.length;++o)'removeListener'!==(s=i[o])&&this.removeAllListeners(s);return this.removeAllListeners('removeListener'),this._events=new n,this._eventsCount=0,this}if('function'==typeof(t=r[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},o.prototype.listeners=function(e){var t,r,s=this._events;return r=s&&(t=s[e])?'function'==typeof t?[t.listener||t]:(e=>{for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t})(t):[],r},o.listenerCount=(e,t)=>'function'==typeof e.listenerCount?e.listenerCount(t):g.call(e,t),o.prototype.listenerCount=g,o.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]},(e=>{e.AdjustNothing="AdjustNothing",e.AdjustPan="AdjustPan",e.AdjustResize="AdjustResize",e.AdjustUnspecified="AdjustUnspecified",e.AlwaysHidden="AlwaysHidden",e.AlwaysVisible="AlwaysVisible",e.Visible="Visible",e.Hidden="Hidden",e.Unchanged="Unchanged"})(rt||(rt={})),(e=>{e.STORY_LIST="storyList",e.STORY_READER="storyReader",e.GAME_READER="gameReader"})(st||(st={})),(e=>{e.direct="direct",e.onboarding="onboarding",e.list="list",e.favorite="favorite"})(nt||(nt={})),(e=>{e[e.default=0]="default",e[e.favorite=1]="favorite"})(ot||(ot={})),(e=>{e[e.default=0]="default",e[e.onboarding=1]="onboarding",e[e.favorite=2]="favorite",e[e.direct=3]="direct"})(at||(at={})),(e=>{e.list="list",e.favorite="favorite"})(lt||(lt={})),(e=>{e.CLICK_ON_STORY="clickOnStoryLink"})(dt||(dt={}));let ct='undefined'!=typeof Symbol&&Symbol.observable||'@@observable',ut='store',ht='effect',pt='map',ft=e=>(bt(e)||Ct(e))&&'kind'in e;const gt=e=>t=>ft(t)&&t.kind===e;let mt=gt(ut),yt=gt("event"),vt=gt(ht),St=gt("domain");var wt={__proto__:null,unit:ft,store:mt,event:yt,effect:vt,domain:St};let Lt=e=>{throw Error(e)},Ct=e=>'object'==typeof e&&null!==e,bt=e=>'function'==typeof e,Rt=e=>{Ct(e)||bt(e)||Lt('expect first argument be an object')};const kt=()=>{let e=0;return()=>(++e).toString(36)};let _t=kt(),Ot=kt(),It=kt(),Et=(e,t)=>e.bind(null,t),At=(e,t,r)=>e.bind(null,t,r);const Ft=(e,t,r)=>({id:Ot(),type:e,data:r,hasRef:t});let Mt=0,Pt=({priority:e="barrier"})=>Ft("barrier",0,{barrierID:++Mt,priority:e}),Tt=({from:e=ut,store:t,target:r,to:s=(r?ut:"stack")})=>Ft('mov',e===ut,{from:e,store:t,to:s,target:r}),xt={defined:()=>Ft('check',0,{type:'defined'}),changed:({store:e})=>Ft('check',1,{type:'changed',store:e})},Dt=At(Ft,'compute',0),Ht=At(Ft,"filter",0),Nt=At(Ft,'run',0),Bt=({store:e})=>Tt({from:"stack",target:e}),jt=e=>({id:Ot(),current:e}),Wt=({current:e})=>e,Ut=(e,{fn:t},{a:r})=>t(e,r),$t=(e,{fn:t},{a:r})=>t(r,e),Vt=(e,{fn:t})=>t(e),qt=e=>e.graphite||e,Gt=e=>e.family.owners,Kt=e=>e.family.links,Jt=e=>e.stateRef,Zt=e=>e.config,zt=e=>e.\u0254,Xt=e=>e.value,Yt=e=>e.subscribers,Qt=e=>e.parent,er=e=>e.forkPage,tr=(e,t)=>{let r=qt(e);for(let e=0;e<t.length;e++){let s=qt(t[e]);"domain"!==r.family.type&&(s.family.type="crosslink"),Gt(s).push(r),Kt(r).push(s)}},rr=null,sr=()=>rr,ir=e=>(e&&rr&&rr.sidRoot&&(e=`${rr.sidRoot}\u0254${e}`),e);const nr=(e=[])=>{let t=[];if(Array.isArray(e))for(let r=0;r<e.length;r++)Array.isArray(e[r])?t.push(...e[r]):t.push(e[r]);else t.push(e);return t.map(qt)};let or=({hasRef:e,type:t,data:r},s)=>{let i;e&&(i=r.store,s[i.id]=i),'mov'===t&&r.to===ut&&(i=r.target,s[i.id]=i)},ar=null;const lr=(e,t)=>{if(!e)return t;if(!t)return e;let r,s=e.v.type===t.v.type;return(s&&e.v.id>t.v.id||!s&&"sampler"===e.v.type)&&(r=e,e=t,t=r),r=lr(e.r,t),e.r=e.l,e.l=r,e},dr=[];let cr=0;for(;cr<5;)dr.push({first:null,last:null,size:0}),cr+=1;const ur=()=>{for(let e=0;e<5;e++){let t=dr[e];if(t.size>0){if(2===e||3===e){t.size-=1;let e=ar.v;return ar=lr(ar.l,ar.r),e}1===t.size&&(t.last=null);let r=t.first;return t.first=r.r,t.size-=1,r.v}}},hr=(e,t,r,s,i,n)=>pr(0,{a:null,b:null,node:r,parent:s,value:i,page:t,forkPage:n},e),pr=(e,t,r,s=0)=>{let i=fr(r),n=dr[i],o={v:{idx:e,stack:t,type:r,id:s},l:0,r:0};2===i||3===i?ar=lr(ar,o):(0===n.size?n.first=o:n.last.r=o,n.last=o),n.size+=1},fr=e=>{switch(e){case'child':return 0;case'pure':return 1;case"barrier":return 2;case"sampler":return 3;case ht:return 4;default:return-1}},gr=new Set;let mr,yr=1,vr=0,Sr=null,wr=e=>{mr=e},Lr=e=>{Sr=e};const Cr=(e,t)=>{if(e){for(;e&&!e.reg[t];)e=Qt(e);if(e)return e}return null},br=(e,t,r)=>(Cr(e,r)||t).reg[r],Rr=(e,{fn:t},r)=>{try{return t(Xt(r),e.scope,r)}catch(t){console.error(t),e.fail=1}};let kr=(e,t)=>''+e.shortName+t,_r=(e,t)=>null==t?kr(e,' \u2192 *'):t,Or=(e,t)=>{Rt(e),zt(e)&&t(Zt(e),zt(e))},Ir=e=>{let t;return Or(e[0],((r,s)=>{t=r,e=s})),[e,t]},Er=(e,t)=>e.includes(t),Ar=(e,t)=>{let r=e.indexOf(t);-1!==r&&e.splice(r,1)};const Fr=(e,t)=>{Ar(e.next,t),Ar(Gt(e),t),Ar(Kt(e),t)},Mr=(e,t,r)=>{let s;e.next.length=0,e.seq.length=0,e.scope=null;let i=Kt(e);for(;s=i.pop();)Fr(s,e),(t||r&&!e.meta.sample||"crosslink"===s.family.type)&&Mr(s,t,'on'!==s.meta.op&&r);for(i=Gt(e);s=i.pop();)Fr(s,e),r&&"crosslink"===s.family.type&&Mr(s,t,'on'!==s.meta.op&&r)},Pr=e=>e.clear();let Tr=(e,{deep:t}={})=>{let r=0;if(e.ownerSet&&e.ownerSet.delete(e),mt(e))Pr(Yt(e));else if(St(e)){r=1;let t=e.history;Pr(t.events),Pr(t.effects),Pr(t.stores),Pr(t.domains)}Mr(qt(e),!!t,r)},xr=e=>{let t=At(Tr,e,void 0);return t.unsubscribe=t,t},Dr=(e,t,{node:r,scope:s,meta:i})=>S({node:r,parent:e,child:t,scope:s,meta:i,family:{owners:[e,t],links:t},regional:1}),Hr=e=>{let t;Or(e,((r,s)=>{t=r,e=s}));let{from:r,to:s,meta:i={op:'forward'}}=e;return v(r,'forward','"from"'),v(s,'forward','"to"'),t&&(i.config=t),xr(S({parent:r,child:s,meta:i,family:{},regional:1}))},Nr=(e,t)=>{if(bt(t)||Lt('.watch argument should be a function'),mr){let t=mr.nodeMap[qt(e).id];t&&(e=t)}return xr(S({scope:{fn:t},node:[Nt({fn:Vt})],parent:e,meta:{op:'watch'},family:{owners:e},regional:1}))};const Br=(e,t)=>(Ct(e)&&(Br(Zt(e),t),null!=e.name&&(Ct(e.name)?Br(e.name,t):bt(e.name)?t.handler=e.name:t.name=e.name),e.loc&&(t.loc=e.loc),(e.sid||null===e.sid)&&(t.sid=e.sid),e.handler&&(t.handler=e.handler),e.updateFilter&&(t.updateFilter=e.updateFilter),Qt(e)&&(t.parent=Qt(e)),'strict'in e&&(t.strict=e.strict),e.named&&(t.named=e.named),Br(zt(e),t)),t);let jr,Wr=(e,t,r="event")=>{Qt(e)&&Qt(e).hooks[r](t)},Ur=(e,t,r,s)=>{let i=Br({name:s,config:r},{}),n="domain"===e,o=_t(),{parent:a=null,sid:l=null,strict:d=1,named:c=null}=i,u=c||i.name||(n?'':o),h=((e,t)=>{let r,s,i,n=e;return t?(i=t.compositeName,0===e.length?(r=i.path,s=i.fullName):(r=i.path.concat([e]),s=0===i.fullName.length?e:i.fullName+'/'+e)):(r=0===e.length?[]:[e],s=e),{shortName:n,fullName:s,path:r}})(u,a),p={unit:t.kind=e,name:t.shortName=u,sid:t.sid=ir(l),named:c,unitId:t.id=o};return t.parent=a,t.compositeName=h,t.defaultConfig=i,t.thru=e=>e(t),t.getType=()=>h.fullName,n||(t.subscribe=e=>(Rt(e),t.watch(bt(e)?e:t=>{e.next&&e.next(t)})),t[ct]=()=>t),jr=d,p},$r=e=>b({named:e});const Vr=(e,t,r,s)=>Dr(e,t,{scope:{fn:s},node:[Dt({fn:Vt})],meta:{op:r}}),qr=(e,t,r,s)=>{let i;Ct(r)&&(i=r,r=r.fn);let n=b(kr(e,' \u2192? *'),i);return Dr(e,n,{scope:{fn:r},node:s,meta:{op:t}}),n},Gr=(e,t,r,s,i,n)=>{let o=Jt(t),a=[Tt({store:o,to:"a"}),Dt({fn:s?$t:Ut}),xt.defined(),xt.changed({store:o}),n&&Ht({fn:(e,t,{a:r})=>n(e,r)}),Bt({store:o})];return Dr(e,t,{scope:{fn:i},node:a,meta:{op:r}})},Kr=(e,t,r,s)=>{let i=e?e=>e.slice():e=>({...e}),n=e?[]:{},o=i(n),a=jt(o),l=jt(1);a.type=e?'list':'shape';let d=R(o,{name:r||L(t)});qt(d).meta.isCombine=1;let c=[xt.defined(),Tt({store:a,to:"a"}),Ht({fn:(e,{key:t},{a:r})=>e!==r[t]}),Tt({store:l,to:'b'}),Dt({fn(e,{clone:t,key:r},s){s.b&&(s.a=t(s.a)),s.a[r]=e}}),Tt({from:"a",target:a}),Tt({from:"value",store:0,target:l}),Pt({priority:"barrier"}),Tt({from:"value",store:1,target:l}),Tt({store:a}),s&&Dt({fn:s}),xt.changed({store:Jt(d)})],u=a.before=[];return C(t,((e,t)=>{if(!mt(e))return void(o[t]=n[t]=e);n[t]=e.defaultState,o[t]=e.getState(),Dr(e,d,{scope:{key:t,clone:i},node:c,meta:{op:'combine'}});let r=Jt(e);u.push({type:'field',field:t,from:r})})),d.defaultShape=t,a.after=[s?{type:pt,to:Jt(d),fn:s}:{type:'copy',to:Jt(d)}],d.defaultState=s?Jt(d).current=s(o):n,d};let Jr=({params:e,req:t,ok:r,anyway:s,stack:i})=>n=>w({target:[s,Zr],params:[r?{status:'done',params:e,result:n}:{status:'fail',params:e,error:n},{fn:r?t.rs:t.rj,value:n}],defer:1,page:i.page,forkPage:er(i)}),Zr=S({node:[Nt({fn({fn:e,value:t}){e(t)}})],meta:{op:'fx',fx:'sidechain'}});const zr=(e,t,r)=>(e.create=t=>(w(e,t),t),qt(e).seq.push(Dt({fn:(e,t,r)=>(r.forkPage=null,e)})),e.watch((e=>{tr(r,[e]),t.add(e),e.ownerSet||(e.ownerSet=t),Qt(e)||(e.parent=r)})),tr(r,[e]),r=>(t.forEach(r),e.watch(r))),Xr=['source','clock','target'],Yr=R({apiKey:""}),Qr=b();Yr.on(Qr,((e,t)=>t));const es=b();Yr.on(es,((e,t)=>{let{tags:r}=t;return{...e,tags:r}}));const ts=b();Yr.on(ts,((e,t)=>{let{userId:r}=t;return{...e,userId:r}}));const rs=b();Yr.on(rs,((e,t)=>{let{placeholders:r}=t;return{...e,placeholders:r}}));const ss=b();Yr.on(ss,((e,t)=>{let{lang:r}=t;return{...e,lang:r}}));const is=b();Yr.on(is,((e,t)=>{let{isSandbox:r}=t;return{...e,isSandbox:Boolean(r)}}));const ns=b();Yr.on(ns,((e,t)=>{let{apiKey:r}=t;return{...e,apiKey:r}}));const os=R(''),as=b();Hr({from:as,to:os});const ls=R({default:{},user:{}}),{sdkPlaceholdersChanged:ds,addDefaultPlaceholders:cs}=_(ls,{sdkPlaceholdersChanged:(e,t)=>({default:e.default,user:t}),addDefaultPlaceholders:(e,t)=>{let r={default:{},user:e.user};return E(t)&&t.forEach((e=>{A(e)&&void 0!==e.name&&void 0!==e.default_value&&(r.default[e.name]=e.default_value)})),r}});for(var us,hs=new Uint8Array(16),ps=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,fs=[],gs=0;gs<256;++gs)fs.push((gs+256).toString(16).substr(1));let ms=e=>null==e;const ys={baseUrl:process.env.BASE_URL,apiUrl:"https://api.inappstory.ru",faviconApiUrl:"https://favicon.inappstory.ru"};class vs{constructor(){return this._sdkConfigIsIncorrect=!1,this._userIdByteLimit=255,this._tagsByteLimit=4e3,this.userMessage="",this.tagsMessage="",vs.instance||(vs.instance=this),vs.instance}static getInstance(){return vs.instance?vs.instance:new vs}get sdkConfigIsIncorrect(){return this._sdkConfigIsIncorrect}get sdkConfigErrorsAsArray(){let e=[];return this.userMessage&&e.push(this.userMessage),this.tagsMessage&&e.push(this.tagsMessage),e}checkUserIdLength(e){this.userMessage="",null!=e&&x(String(e))>this._userIdByteLimit&&(console.error(`UserId is bigger then ${this._userIdByteLimit} bytes`),this._sdkConfigIsIncorrect=!0,this.userMessage=`UserId "${String(e)}" is bigger then ${this._userIdByteLimit} bytes`)}checkTagsLength(e){this.tagsMessage="",null!=e&&Array.isArray(e)&&x(e.join(","))>this._tagsByteLimit&&(console.error(`Tags (joined by ',') is bigger then ${this._tagsByteLimit} bytes`),this._sdkConfigIsIncorrect=!0,this.tagsMessage=`Tags (joined by ',') "${e.join(",")}" is bigger then ${this._tagsByteLimit} bytes`)}}vs.instance=void 0;const Ss=new class{constructor(){this._deviceInfoPromise=null,this._baseHeaders={},this._userInfo={deviceId:null,userId:null},this.requestInterceptors=[],this.interceptors={request:{use:e=>{this.requestInterceptors.push(e)}}}}set deviceInfoPromise(e){this._deviceInfoPromise=e}set baseHeaders(e){this._baseHeaders=e}set deviceId(e){this._userInfo.deviceId=e}set userId(e){let t=null;D(e)||!H(e)&&!N(e)||(t=String(e),0==t.length&&(t=null)),this._userInfo.userId=t}get userKey(){return this._userInfo.userId?this._userInfo.userId:this._userInfo.deviceId?this._userInfo.deviceId:"default"}get baseURL(){return`${ys.apiUrl}/v2/`}async request(e){return new Promise(((t,r)=>{this._deviceInfoPromise?this._deviceInfoPromise.finally((async()=>{try{if(A(e.headers)&&null!=e.headers||(e.headers={}),e.headers=T(this._baseHeaders,e.headers),this.requestInterceptors.length)for(let t of this.requestInterceptors)t(e);let r="";!ms(e.params)&&A(e.params)&&(r=new URLSearchParams(Object.entries(e.params)).toString());let i=new URL(`${s=e.url,s.replace(/^\//,"")}${r?"?"+r:""}`,this.baseURL),n="get";ms(e.method)||(n=e.method);let o={};!ms(e.headers)&&A(e.headers)&&(o=e.headers);let a=null;!ms(e.data)&&A(e.data)&&(a=JSON.stringify(e.data),o["Content-Type"]="application/json");try{if(vs.getInstance().sdkConfigIsIncorrect)return void t({data:{name:"SDK config is incorrect",message:vs.getInstance().sdkConfigErrorsAsArray.join(". "),status:400},headersRaw:{},headers:{},status:400,statusText:"SDK config is incorrect",ok:!1})}catch(e){console.error(e)}let l=await fetch(i.toString(),{method:n,body:a,headers:o,credentials:"omit"}),d=await l.json();t({data:d,headersRaw:l.headers,headers:Object.fromEntries([...l.headers]),status:l.status,statusText:l.statusText,ok:l.ok})}catch(e){r(e)}var s})):r(new Error("Invalid device info Promise"))}))}async post(e,t){return this.request({method:"post",url:e,data:t})}async get(e,t){return this.request({method:"get",url:e,params:t})}};Ss.interceptors.request.use((e=>{var t,r;return e.headers=T(e.headers,{Authorization:`Bearer ${Yr.getState().apiKey}`,"Accept-Language":Yr.getState().lang||"en","Auth-Session-Id":null===(t=ws.getState())||void 0===t||null===(r=t.session)||void 0===r?void 0:r.id,"X-User-Id":Yr.getState().userId?Yr.getState().userId:"","X-Request-Id":P()}),e}));const ws=R({session:{id:'',expire_in:0},server_timestamp:0,content_base_url:'',user_key:'',share:!1,is_allow_profiling:!1,cache:[],placeholders:[]}),Ls=k();ws.on(Ls.doneData,((e,t)=>t));const Cs=b();ws.on(Cs,(e=>({...e,session:{id:'',expire_in:0}})));const bs=b(),Rs=k((e=>{Ss.post('session/update',e)})).prepend((e=>({data:[[5,0,...e]]})));Ls.use((async()=>{let[e,t]=await Promise.all([_s(),Os()]);return(await Ss.post('session/open?expand=cache',ks(e,t))).data})),Hr({from:bs,to:ws});const ks=(e,t)=>{'iOS'===e.os_name?window.isIos=!0:'Android'===e.os_name&&(window.Android=!0);let r=Yr.getState();return r&&r.userId&&(e.user_id=r.userId),e.features='animation,data,deeplink,placeholder,resetTimers,gameReader,swipeUpItems',t&&(e.features+=',webp'),e},_s=()=>hi.getInstance().getDeviceInfo(as),Os=()=>Promise.resolve(hi.getInstance().isWebPSupported),Is=R({default:[]}),Es=Is.map((e=>e[Ss.userKey]||[]));let As;(e=>{e.FEEDS="feeds",e.FAVORITE="favorite"})(As||(As={}));const Fs=R({default:{[As.FEEDS]:{},[As.FAVORITE]:[]}}),Ms=Fs.map((e=>e[Ss.userKey]||{})),Ps=R({}),Ts=R({}),xs=R([]);Ps.on([Ms,Es],(()=>{let e=Ms.getState(),t={},r=Es.getState();for(let s in e[As.FEEDS])if(t[s]=[],e[As.FEEDS][s]&&Array.isArray(e[As.FEEDS][s])){let i=e[As.FEEDS][s];for(let e of i){let i=r.find((t=>t.id===e));i&&t[s].push(i)}}return t})),Ts.on([Ms,Es],(()=>{let e=Ms.getState(),t={},r=Es.getState();for(let s in e[As.FEEDS])if("onboarding_"===s.substring(0,"onboarding_".length)){let i=s.substring("onboarding_".length);t[i]=[],e[As.FEEDS][s]&&Array.isArray(e[As.FEEDS][s])&&(t[i]=r.filter((t=>-1!==e[As.FEEDS][s].indexOf(t.id)&&!t.is_opened)))}return t})),xs.on([Ms,Es],(()=>{let e=Ms.getState();return Es.getState().filter((t=>{var r;return-1!==(null===(r=e[As.FAVORITE])||void 0===r?void 0:r.indexOf(t.id))}))}));const Ds=k(),Hs=e=>e.is_opened,Ns=Es.map((e=>e.filter((e=>!e.slidesLoaded)).map((e=>e.id)))),{storyItemFavoriteChanged:Bs,storyItemLikeChanged:js,storyItemIsOpenedChanged:Ws}=_(Is,{storyItemFavoriteChanged:(e,t)=>{let{id:r,favorite:s}=t,i=Ss.userKey,n=(e[i]||[]).slice(0),o=n.find((e=>e.id===r));return void 0!==o&&(o.favorite=s),{...e,[i]:n}},storyItemLikeChanged:(e,t)=>{let{id:r,like:s}=t,i=Ss.userKey,n=(e[i]||[]).slice(0),o=n.find((e=>e.id===r));return void 0!==o&&(o.like=s),{...e,[i]:n}},storyItemIsOpenedChanged:(e,t)=>{let{id:r}=t,s=Ss.userKey,i=(e[s]||[]).slice(0),n=i.find((e=>e.id===r));return void 0!==n&&(n.is_opened=!0),{...e,[s]:i}}});Ds.use((async()=>Ss.get('story',Us())));const Us=(e,t,r,s)=>{var i;let n=null===(i=Yr.getState())||void 0===i?void 0:i.tags,o={};return n&&E(n)&&n.length>0&&(o.tags=n.join(',')),void 0!==t&&E(t)&&t.length>0&&(o.tags=t.join(',')),null==s||'number'!=typeof s&&!(e=>!isNaN(parseFloat(e))&&isFinite(e))(s)||(o.limit=s),e&&(o.session_id=e),null!=r&&(o.test=r),{params:o}},$s=R(null),Vs=k(),qs=b();Vs.use((async e=>{let{ids:t}=e;return Ss.request(W(t))})),Hr({from:Vs.done.filterMap((e=>{let t=e.result.data;if(t&&A(t))return{...t,ids:e.params.ids}})),to:$s}),Hr({from:qs,to:$s});const Gs=k((async e=>{var t,r;let{defaultList:s,onboardingList:i,favoriteList:n,onboardingTags:o,testKey:a,limit:l}=e,d=[],c=null;D(null===(t=ws.getState())||void 0===t||null===(r=t.session)||void 0===r?void 0:r.id)&&(d.push(Ks(await B(),"session")),c="@{session.session.id}"),!1!==s&&H(s)&&d.push(Ks(((e,t,r,s)=>{let{params:i}=Us(t,[],s);return{method:"GET",url:`feed/${e}`,params:i}})(s,c,0,a),`storyList_${s}`)),n&&d.push(Ks((e=>{let{params:t}=Us(e);return{method:"GET",url:"story",params:{...t,favorite:1}}})(c),"storyFavoriteList")),!1!==i&&H(i)&&"string"==typeof i&&d.push(Ks(((e,t,r,s)=>{void 0===e&&(e="onboarding");let{params:i}=Us(t,r,null,s);return{method:"GET",url:`feed/${e}/onboarding`,params:i}})(i,c,o,l),`storyOnboardingList_${i}`));let u=null;try{let e=await Ss.post("composite",{compositeRequest:d});if(e.status>=200&&e.status<=299)if(e.data&&e.data.compositeResponse&&Array.isArray(e.data.compositeResponse)){if(e.data.success)return e.data.compositeResponse;for(let t of e.data.compositeResponse){let e=t.status;if(N(e)&&!(e>=200&&e<=299)){u={name:"networkError",networkStatus:e,networkMessage:String(t.body)};break}}}else u=e.data&&A(e.data)&&null!=e.data.name&&null!=e.data.message&&null!=e.data.status?{name:e.data.name,networkStatus:e.data.status,networkMessage:e.data.message}:{name:"networkError",networkStatus:null,networkMessage:"Invalid data in API response, data from response as json: "+JSON.stringify(e.data)};else u=e.data&&A(e.data)&&null!=e.data.name&&null!=e.data.message&&null!=e.data.status?{name:e.data.name,networkStatus:e.data.status,networkMessage:e.data.message}:{name:"networkError",networkStatus:e.status,networkMessage:"Invalid data in API response, data from response as json: "+JSON.stringify(e.data)}}catch(e){try{let t=e;if(t.response&&t.response.status)u={name:"networkError",networkStatus:t.response.status,networkMessage:t.response.statusText};else{let t="";window.navigator&&null!=window.navigator.onLine&&(t=" net::ERR_INTERNET_DISCONNECTED"),u={name:"error",networkStatus:null,networkMessage:e.toString()+t},console.error(e)}}catch(e){u={name:"error",networkStatus:null,networkMessage:e.toString()}}}if(null!==u)throw u;return[]})),Ks=(e,t)=>({path:e.url,qs:e.params,body:e.data,ref:t,method:e.method}),Js={}.hasOwnProperty,Zs=e=>{let t=ls.getState();for(let r in t.user)Js.call(t.user,r)&&(e=U(e,`%${r}%`,t.user[r]));for(let r in t.default)Js.call(t.default,r)&&(e=U(e,`%${r}%`,t.default[r]));return e},zs=e=>Array.isArray(e)?e.map((e=>({...e,title:e.need_placeholders?Zs(e.title):e.title,slidesLoaded:!1,is_opened:Hs(e)}))):[];Hr({from:Gs.doneData.filterMap((e=>{var t;return null===(t=e.find((e=>"session"===e.ref)))||void 0===t?void 0:t.body})),to:ws}),Hr({from:Gs.doneData.filterMap((e=>{var t,r;return null===(t=e.find((e=>"session"===e.ref)))||void 0===t||null===(r=t.body)||void 0===r?void 0:r.placeholders})),to:cs}),((...e)=>{let t,r,s,i,[[n,o,a],l]=Ir(e);void 0===o&&Ct(n)&&(e=>{let t=0;return((e,t)=>{Xr.forEach(t)})(0,(r=>{r in e&&(null==e[r]&&Lt(`sample: ${r} should be defined`),t=1)})),t})(n)&&(o=n.clock,a=n.fn,i=n.greedy,t=n.target,r=n.name,s=n.sid,n=n.source);let d=1;void 0===n&&(v(o,'sample','clock'),Array.isArray(o)&&(o=I(o)),n=o,d=0),d&&!ft(n)&&(n=((...e)=>{let t,r,s;Or(e[0],((t,r)=>{s=t,e=r}));let i,n,o=e[e.length-1];if(bt(o)?(r=e.slice(0,-1),t=o):r=e,1===r.length){let e=r[0];mt(e)||(i=e,n=1)}return n||(i=r,t&&(t=(e=>t=>e(...t))(t))),Ct(i)||Lt('shape should be an object'),Kr(Array.isArray(i),i,s,t)})(n)),void 0===o&&(o=n),v(o,'sample','clock'),r=l||r||n.shortName;let c=sr(),u=!!t;t||(mt(n)&&mt(o)?t=R(a?a(Wt(Jt(n)),Wt(Jt(o))):Wt(Jt(n)),{name:r,sid:s}):(t=b(r),c&&qt(t).seq.push(c.loader)));let h=u&&ft(t)&&qt(t).meta.nativeTemplate;if(mt(n)){let e=Jt(n);tr(n,[Dr(o,t,{scope:{fn:a,targetTemplate:h},node:[c&&c.loader,!i&&Pt({priority:"sampler"}),Tt({store:e,to:a?"a":"stack"}),a&&Dt({fn:$t}),c&&u&&c.upward],meta:{op:"sample",sample:ut}})]),c&&(Er(c.plain,e)||Er(c.closure,e)||c.closure.push(e))}else{let e=jt(0),r=jt(),s=jt();c&&c.plain.push(e,r,s),S({parent:n,node:[Bt({store:r}),Tt({from:"value",store:1,target:e})],family:{owners:[n,t,o],links:t},meta:{op:"sample",sample:'source'},regional:1}),tr(n,[Dr(o,t,{scope:{fn:a,targetTemplate:h},node:[c&&c.loader,Bt({store:s}),Tt({store:e}),Ht({fn:e=>e}),!i&&Pt({priority:"sampler"}),Tt({store:r}),Tt({store:s,to:"a"}),a&&Dt({fn:Ut}),c&&u&&c.upward],meta:{op:"sample",sample:'clock'}})])}})({source:Is,clock:ws,fn:e=>{let t={};for(let r in e)Js.call(e,r)&&(t[r]=e[r].map((e=>({...e,is_opened:Hs(e),title:e.need_placeholders?Zs(e.title):e.title}))));return t},target:Is});const{storiesListItemsAdded:Xs}=_(Is,{storiesListItemsAdded:(e,t)=>{let{storyList:r}=t,s=Ss.userKey,i=e[s]||[],n=i.map((e=>e.id)),o=[];for(let e of i){let t=r.find((t=>t.id===e.id));o.push(null!=t?(l=t,(a=e).slidesLoaded?{...l,...a}:{...a,...l}):e)}var a,l;return{...e,[s]:[...o,...r.filter((e=>-1===n.indexOf(e.id)))]}}}),{storiesListIdsChanged:Ys}=_(Fs,{storiesListIdsChanged:(e,t)=>{let{storiesIdsUserEntity:r,feedSlug:s,storyList:i}=t,n=Ss.userKey,o=e[n]||{};return void 0===o[As.FAVORITE]&&(o[As.FAVORITE]=[]),void 0===o[As.FEEDS]&&(o[As.FEEDS]={}),r===As.FEEDS&&s&&(o[As.FEEDS][s]=i.map((e=>e.id))),r===As.FAVORITE&&(o[As.FAVORITE]=i.map((e=>e.id))),{...e,[n]:o}}});Hr({from:Gs.doneData.filterMap((e=>{let t=null;for(let s of e)if(s.ref&&H(s.ref)){let e=s.ref.match(/^storyList_(.+)/);if(e&&Array.isArray(e)&&e[1]){var r;let i=zs(null===(r=s.body)||void 0===r?void 0:r.stories);t={storiesIdsUserEntity:As.FEEDS,feedSlug:e[1],storyList:i}}}if(t)return t})),to:[Xs,Ys]}),Hr({from:Gs.doneData.filterMap((e=>{let t=e.find((e=>"storyFavoriteList"===e.ref));if(void 0===t)return;let r=zs(t.body);return{storiesIdsUserEntity:As.FAVORITE,feedSlug:null,storyList:r}})),to:[Xs,Ys]}),Hr({from:Gs.doneData.filterMap((e=>{let t=null;for(let s of e)if(s.ref&&H(s.ref)){let e=s.ref.match(/^storyOnboardingList_(.+)/);if(e&&Array.isArray(e)&&e[1]){var r;let i=zs(null===(r=s.body)||void 0===r?void 0:r.stories);t={storiesIdsUserEntity:As.FEEDS,feedSlug:`onboarding_${e[1]}`,storyList:i}}}if(t)return t})),to:[Xs,Ys]});const Qs=k();Qs.use((async e=>{let t=e.ids.map((e=>Ks(j(e),`storySlides_${e}`))),r=await Ss.post("composite",{compositeRequest:t});return r.data&&r.data.success&&r.data.compositeResponse&&Array.isArray(r.data.compositeResponse)?r.data.compositeResponse:[]}));const ei=e=>e&&A(e)&&"id"in e,ti=k();ti.use((async e=>{let{ids:t,id:r}=e,s=[Ks(j(r),"storySlides"),Ks(W(t),"storyContext")],i=await Ss.post("composite",{compositeRequest:s});return i.data&&i.data.success&&i.data.compositeResponse&&Array.isArray(i.data.compositeResponse)?i.data.compositeResponse:[]})),Is.on([Qs.doneData,ti.doneData],((e,t)=>{if(Array.isArray(t)){let r=Ss.userKey,s=(e[r]||[]).slice(0).map((e=>{for(let p=0;p<t.length;p++){var r,s,i,n,o,a,l,d,c,u,h;if(ei(null===(r=t[p])||void 0===r?void 0:r.body)&&(null===(s=t[p])||void 0===s||null===(i=s.body)||void 0===i?void 0:i.id)===e.id)return Object.assign({},e,{slides_html:e.need_placeholders?Array.from(null===(n=t[p])||void 0===n||null===(o=n.body)||void 0===o?void 0:o.slides_html).map((e=>Zs(e))):Array.from(null===(a=t[p])||void 0===a||null===(l=a.body)||void 0===l?void 0:l.slides_html),slides_duration:null===(d=t[p])||void 0===d||null===(c=d.body)||void 0===c?void 0:c.slides_duration,slides_screenshot_share:null===(u=t[p])||void 0===u||null===(h=u.body)||void 0===h?void 0:h.slides_screenshot_share,slidesLoaded:!0,is_opened:Hs(e)})}return e}));return{...e,[r]:s}}return e})),Hr({from:ti.done.filterMap((e=>{var t;let r=null===(t=e.result.find((e=>"storyContext"===e.ref)))||void 0===t?void 0:t.body;if(r&&A(r))return{...r,ids:e.params.ids}})),to:$s});const ri=k((async e=>{var t,r;let{id:s}=e,i=[],n=null;D(null===(t=ws.getState())||void 0===t||null===(r=t.session)||void 0===r?void 0:r.id)&&(i.push(Ks(await B(),"session")),n="@{session.session.id}"),i.push(Ks(j(s,!0,n),"story")),i.push(Ks(W([s],n),"storyContext"));let o=await Ss.post("composite",{compositeRequest:i});if(o.data&&o.data.success&&o.data.compositeResponse&&Array.isArray(o.data.compositeResponse))return o.data.compositeResponse;if(o.data&&!o.data.success)throw Error("composite request error:"+JSON.stringify(o.data.compositeResponse));return[]})),si=e=>!!e;Hr({from:ri.doneData.filterMap((e=>{var t;let r=null===(t=e.find((e=>"session"===e.ref)))||void 0===t?void 0:t.body;if(r&&A(r)&&si(r))return r})),to:ws}),Hr({from:ri.done.filterMap((e=>{var t;let r=null===(t=e.result.find((e=>"storyContext"===e.ref)))||void 0===t?void 0:t.body;if(r&&A(r))return{...r,ids:[e.params.id]}})),to:$s}),Is.on(ri.doneData.filterMap((e=>{var t,r;let s=null,i=null===(t=e.find((e=>"session"===e.ref)))||void 0===t?void 0:t.body;i&&A(i)&&si(i)&&(s=i.user_key);let n=null===(r=e.find((e=>"story"===e.ref)))||void 0===r?void 0:r.body;if(n&&A(n))return{story:n,userKey:s}})),((e,t)=>{if(A(t)&&void 0!==t.story&&ei(t.story)){let r=Ss.userKey,s=(e[r]||[]).slice(0),i=t.story,n=s.filter((e=>{var t;return e.id!==(null===(t=i)||void 0===t?void 0:t.id)})).slice(0);return i=Object.assign(i,{slides_html:i.need_placeholders?Array.from(i.slides_html).map((e=>Zs(e))):Array.from(i.slides_html),slides_duration:i.slides_duration,slidesLoaded:!0,is_opened:Hs(i)}),n.push(i),{...e,[r]:n}}}));let ii=!1,ni=null;const oi=()=>(null!=ni||(ni=new Promise((e=>{ws.watch((t=>{let{session:r}=t;!ii&&null!=r&&Boolean(r.id)&&(ii=!0,e())}))}))),ni);let ai;(e=>{e.START_LOADING="startLoad",e.END_LOADING="endLoad",e.CLOSE_STORY_READER="closeStoryReader"})(ai||(ai={}));class li{}const di=(e,t)=>{switch(e){case at.default:return t?Ps.getState()[t]:[];case at.favorite:return xs.getState();case at.onboarding:return t?Ts.getState()[t]:[]}return[]},ci=()=>ws.getState().cache.filter((e=>"font-face"===e.type)),ui=async(e,t,r,s)=>{let i=await(async e=>new Promise((t=>{let r,s=s=>{let i=((e,t)=>e.find((e=>e.id===t||e.string_id===t)))(s,e);var n,o;return null==i?(t(void 0),null===(n=r)||void 0===n||n.unsubscribe(),!0):!!(e=>e.slidesLoaded)(i)&&(t(i),null===(o=r)||void 0===o||o.unsubscribe(),!0)};s(Es.getState())||(r=Es.watch((e=>s(e))))})))(e);if(null!=i){await oi(),t.setFonts(ci());let e={windowReferer:ot.default,listType:at.default,id:i.id,storyContext:$s.getState(),storyList:[i],hasShare:ws.getState().share,platform:r,soundOn:s};return t.openReader(e,{listType:at.direct,feed:null}),!0}return!1};class hi extends o{get soundOn(){return this._soundOn}set soundOn(e){this._soundOn=e,null!=this.storyReaderInstance&&this.storyReaderInstance.setSoundOn(this._soundOn)}constructor(t,r){return super(),this._soundOn=void 0,this._callbacks={},this.clickOnButtonAction=t=>{let{src:r,payload:s}=t;if(e(this._callbacks.storyLinkClickHandler)||this.listenerCount(dt.CLICK_ON_STORY)>0){let t={src:r,srcRef:"default",data:s};try{e(this._callbacks.storyLinkClickHandler)&&this._callbacks.storyLinkClickHandler(t),this.emit(dt.CLICK_ON_STORY,t)}catch(e){console.error(e)}}else this.defaultLinking(s.url)},this.StoriesList=class extends o{constructor(e,t,r){void 0===r&&(r="default"),super(),this.feedSlug=r,this.storyListWidget=void 0,this.appearanceManager=void 0,this._listLoadStatus={feed:"default",defaultListLength:0,favoriteListLength:0,success:!0,error:{name:"",networkStatus:200,networkMessage:""}}}async reload(e){var t;void 0===e&&(e={needLoader:!0});let r=!0;!1===(null===(t=e)||void 0===t?void 0:t.needLoader)&&(r=!1);try{return await hi.instance._loadStoriesList(this.storyListWidget,this.appearanceManager,this,!1,r)}catch(e){throw Error(e)}}},this._appearanceManager=null,this.storyListInstance=null,this._storyReaderInstance=null,this.storyReaderInstancePromise=null,this.storyReaderInstancePromiseResolver=null,this._goodsWidgetInstance=null,this._storyReaderNeedFirstRender=null,this._storyReaderNeedLoaderRenderResolver=null,this._storyReaderNeedLoaderRender=new Promise((e=>{this._storyReaderNeedLoaderRenderResolver=e})),this._storyReaderDetachComponent=null,this._storyReaderWidgetLoaded=async e=>{await oi(),this.completeInitStoryReader(e,ci()),null!=this.storyReaderInstancePromiseResolver&&this.storyReaderInstancePromiseResolver(e)},this._storyFavoriteReaderInstance=null,this.storyFavoriteReaderInstancePromise=null,this.storyFavoriteReaderInstancePromiseResolver=null,this._storyFavoriteReaderNeedFirstRender=null,this._storyFavoriteReaderNeedLoaderRender=null,this._storyFavoriteReaderDetachComponent=null,this._storyFavoriteReaderWidgetLoaded=async e=>{await oi(),this.completeInitStoryFavoriteReader(e,ci()),null!=this.storyFavoriteReaderInstancePromiseResolver&&this.storyFavoriteReaderInstancePromiseResolver(e)},this._loadedStoriesLength={defaultListLength:0,favoriteListLength:0},this._listLoadStatus={feed:"default",defaultListLength:0,favoriteListLength:0,success:!0,error:{name:"",networkStatus:200,networkMessage:""}},this._loadStoriesList=async(e,t,r)=>{void 0===r&&(r=!0);let s=!0===t.commonOptions.hasFavorite&&r;try{await Gs({defaultList:e.feedSlug,onboardingList:!1,favoriteList:s,testKey:e.testKey}),await new Promise((e=>setTimeout(e,100))),e.setListLoadStatusField("feed",e.feedSlug),e.setListLoadStatusField("success",!0),e.setListLoadStatusField("error",null)}catch(t){e.setListLoadStatusField("success",!1),e.setListLoadStatusField("error",{name:t.name,networkMessage:t.networkMessage,networkStatus:t.networkStatus})}return e.listLoadStatus},this._loadStoriesListData=async(e,t)=>{e.emit(Ye.START_LOADER);let r=await this._loadStoriesList(e,t,!0);return setTimeout((()=>{e.emit(Ye.END_LOADER,r)})),r},this.isWebPSupported=!1,this._storiesListWidgetLoaded=async(t,r)=>{this.isWebPSupported=await t.checkWebPSupport(),t.forUnsubscribe.push(Ps.watch((e=>{var r;let s=null!==(r=e[t.feedSlug])&&void 0!==r?r:[];t.setListLoadStatusField("defaultListLength",s.length),t.setStories({listType:at.default,storyList:s})}))),r.commonOptions.hasFavorite&&t.forUnsubscribe.push(xs.watch((async e=>{t.setListLoadStatusField("favoriteListLength",e.length),t.setStories({listType:at.favorite,storyList:e}),this._storyFavoriteReaderInstance&&this._storyFavoriteReaderInstance.setStories({listType:at.favorite,storyList:e})}))),await oi();let s=ci();return t.setFonts(s),Yr.getState(),t.setCallbacks({handleClickOnStoryDeepLink:t=>{if(Ss.post("session/update",{data:[[1,0,t.id,0,0]]}),t.isDeeplink&&t.url){let s=r.storiesListOptions;null!=s&&s.handleStoryLinkClick&&e(null==s?void 0:s.handleStoryLinkClick)?null==s||s.handleStoryLinkClick(t):this.clickOnButtonAction({src:st.STORY_LIST,payload:t})}},handleClickOnStory:e=>{if(0===e.id)this.emit("clickOnFavoriteCell",{feed:t.feedSlug});else{let r={title:null,tags:[],slidesCount:null,feed:null,source:null},s=Es.getState().find((t=>t.id===e.id));s&&(r.title=s.title,r.tags=s.tags,r.slidesCount=s.slides_count),r.feed=t.feedSlug,r.source=nt.list,this.emit("clickOnStory",{...e,...r})}},handleFlushThumbViews:e=>{Rs(e)},handleClickOnStoryInternal:e=>this.handleClickOnStoryInternal(e,t.feedSlug)}),t.on("clickOnFavoriteCellInternal",(async e=>{let r;try{this.emit("openStoryFavoriteReader",e),r=await this.getStoryFavoriteReaderInstance(),r.emit("openStoryFavoriteReader",e),this.showStoryFavoriteReaderLoader(!0);let s={...e,storyList:di(at.favorite),soundOn:this.soundOn};r.openReader(s,{listType:e.listType,feed:t.feedSlug})}catch(e){this.showStoryFavoriteReaderLoader(!1),r&&r.closeReader(),console.log(e)}})),this.storyListInstance=t,{storyListWidget:t,appearanceManager:r}},this._androidDefaultWindowSoftInputMode=null,this._innerAndroidDefaultWindowSoftInputIntegerMode=null,this.SharePage=class extends o{constructor(e,t,r,s){return super(),this.storyReaderWidget=void 0,this.appearanceManager=void 0,this.options={},r&&(this.options=r),hi.instance._showSharePage(e,t,this.options,this).then((e=>{let{storyReaderInstance:t,appearanceManager:r}=e;this.storyReaderWidget=t,this.appearanceManager=r})),this}async closeStoryReader(){this.storyReaderWidget&&(hi.instance.closeGoodsWidget(),this.storyReaderWidget.closeReader())}},this._showSharePage=async(t,r,s,i)=>{setTimeout((()=>{i.emit(ai.START_LOADING),e(s.handleStartLoad)&&s.handleStartLoad()}));let n=!1,o=null;try{await oi(),o=await this.initStoryReader(r,ci(),{closeOnLastSlideByTimer:!1,recycleStoriesList:!1}),o.on("closeStoryReader",(()=>{if(e(s.handleStoryReaderClose)||i.listenerCount(ai.CLOSE_STORY_READER)>0)try{e(s.handleStoryReaderClose)&&s.handleStoryReaderClose(),i.emit(ai.CLOSE_STORY_READER)}catch(e){console.error(e)}else{let e=window.location!=window.parent.location?window.parent.location:window.location;window.open(`${e.protocol}//${e.host}`,"_parent")}})),n=await ui(t,o,this.getDevicePlatform(),this.soundOn)}catch(e){}return i.emit(ai.END_LOADING,{result:n}),e(s.handleStopLoad)&&s.handleStopLoad(n),{storyReaderInstance:o,appearanceManager:r,result:n}},hi.instance||(D(t.userId)||(t.userId=String(t.userId)),vs.getInstance().checkUserIdLength(t.userId),vs.getInstance().checkTagsLength(t.tags),null!=t.defaultMuted&&"boolean"==typeof t.defaultMuted||(t.defaultMuted=!0),this._soundOn=!t.defaultMuted,Qr(t),t.placeholders&&ds(t.placeholders),r&&A(r)&&(this._callbacks=r),Ss.deviceInfoPromise=new Promise((e=>(async(e,t,r)=>{let s=await e();t.baseHeaders={"X-Sdk-Version":s.sdkVersion,"X-App-Package-Id":s.applicationBundleId,"X-User-Agent":s.userAgent,"X-Device-Id":s.deviceId},t.deviceId=s.deviceId,r(!0)})(this.getDeviceInformation,Ss,e))),Ss.userId=t.userId,(e=>{let t=(e=>{if(e.length>32)try{let t=(e=>{e=e.replace(new RegExp('-','g'),'+').replace(new RegExp('_','g'),'/'),e=((e,t)=>void 0===t?e:t.length>=e.length?t:(t+e).substring(0,e.length))(new Array(e.length%4).fill("=").join(""),e);try{return(e=>{void 0===e&&(e='');let t=e.replace(/=+$/,''),r='';if(t.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(let e,s=0,i=0,n=0;e=t.charAt(n++);~e&&(i=s%4?64*i+e:e,s++%4)?r+=String.fromCharCode(255&i>>(-2*s&6)):0)e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e);return r})(e)}catch(e){return""}})(e),r=t.charCodeAt(13);if(r>0){let e=t.substr(14,r);e=e.replace(/\0+$/,'');let s="{QQN{xuV?1Dv16j3",i=s,n=0;for(;i.length<r;)i+=s[n],n++,n===s.length&&(n=0);let o="";for(let t=0;t<r;t++)o+=String.fromCharCode(e.charCodeAt(t)^i.charCodeAt(t));return o}}catch(e){console.error(e)}return null})(e);if(null!=t){let e=t.split(".").slice(1);ys.baseUrl=`https://${["sdk",...e].join(".")}`,ys.faviconApiUrl=`https://${["favicon",...e].join(".")}`,ys.apiUrl=`https://${t}`}})(t.apiKey),hi.instance=this),hi.instance}destructor(){delete hi.instance}set storyLinkClickHandler(t){e(t)&&(this._callbacks.storyLinkClickHandler=t)}defaultLinking(e){e&&window.open(e,"_self")}set openGoodsWidgetHandler(t){e(t)&&(this._callbacks.openGoodsWidgetHandler=t)}get openGoodsWidgetHandler(){return this._callbacks.openGoodsWidgetHandler}static getInstance(){if(!hi.instance)throw new Error("Error - use new IAS.StoryManager(). For first init - with config");return hi.instance}setTags(e){E(e)&&(vs.getInstance().checkTagsLength(e),es({tags:e}))}getTags(){var e;return null!==(e=Yr.getState().tags)&&void 0!==e?e:[]}setUserId(e){let t=null;D(e)||!H(e)&&!N(e)||(t=String(e),vs.getInstance().checkUserIdLength(t)),Cs(),Ss.userId=t,ts({userId:t})}getUserId(){return Yr.getState().userId}setLang(e){H(e)&&ss({lang:e})}getLang(){return Yr.getState().lang}setPlaceholders(e){A(e)&&rs({placeholders:e})}getPlaceholders(){return Yr.getState().placeholders}setIsSandbox(e){is({isSandbox:e})}setApiKey(e){ns({apiKey:e}),Cs()}get appearanceManager(){return this._appearanceManager}set appearanceManager(e){this._appearanceManager=e}set storyReaderNeedFirstRender(e){this._storyReaderNeedFirstRender=e}set storyReaderNeedLoaderRender(e){this._storyReaderNeedLoaderRenderResolver(e)}set storyReaderDetachComponent(e){this._storyReaderDetachComponent=e}get storyReaderInstance(){return this._storyReaderInstance}async getStoryReaderInstance(){return new Promise((e=>{null==this._storyReaderInstance?(null==this.storyReaderInstancePromise&&(null!=this._storyReaderNeedFirstRender&&this._storyReaderNeedFirstRender(!0),this.storyReaderInstancePromise=new Promise((e=>this.storyReaderInstancePromiseResolver=e))),this.storyReaderInstancePromise.then((t=>{this._storyReaderInstance=t,e(t)}))):e(this._storyReaderInstance)}))}async showStoryReaderLoader(e){(await this._storyReaderNeedLoaderRender)(e)}set storyFavoriteReaderNeedFirstRender(e){this._storyFavoriteReaderNeedFirstRender=e}set storyFavoriteReaderNeedLoaderRender(e){this._storyFavoriteReaderNeedLoaderRender=e}set storyFavoriteReaderDetachComponent(e){this._storyFavoriteReaderDetachComponent=e}get storyFavoriteReaderInstance(){return this._storyFavoriteReaderInstance}async getStoryFavoriteReaderInstance(){return new Promise((e=>{null==this._storyFavoriteReaderInstance?(null==this.storyFavoriteReaderInstancePromise&&(null!=this._storyFavoriteReaderNeedFirstRender&&this._storyFavoriteReaderNeedFirstRender(!0),this.storyFavoriteReaderInstancePromise=new Promise((e=>this.storyFavoriteReaderInstancePromiseResolver=e))),this.storyFavoriteReaderInstancePromise.then((t=>{this._storyFavoriteReaderInstance=t,e(t)}))):e(this._storyFavoriteReaderInstance)}))}showStoryFavoriteReaderLoader(e){null!=this._storyFavoriteReaderNeedLoaderRender&&this._storyFavoriteReaderNeedLoaderRender(e)}async handleClickOnStoryInternal(e,t){let r;try{this.emit("openStoryReader",e),r=await this.getStoryReaderInstance(),r.emit("openStoryReader",e),this.showStoryReaderLoader(!0);let s=$s.getState(),i=null!==s;s&&Ns.getState().length>0&&s.ids!==Ns.getState()&&(i=!1),i=!1,Es.getState().find((t=>t.id===e.id));let n=di(e.listType,t).map((e=>e.id));await ti({ids:n,id:e.id});let o={...e,storyContext:$s.getState(),storyList:di(e.listType,t),hasShare:ws.getState().share,platform:this.getDevicePlatform(),soundOn:this.soundOn};r.openReader(o,{listType:e.listType,feed:t});let a=Ns.getState();a.length>0&&await Qs({ids:a}),r.setStories({listType:e.listType,storyList:di(e.listType,t)})}catch(e){this.showStoryReaderLoader(!1),r&&r.closeStoryReaderOrLoader(),console.log(e)}}completeInitStoryReader(e,t,r){return e.setSoundOn(this._soundOn),e.on("changeSoundOnInternal",(e=>{let{value:t}=e;this._soundOn=t})),e.setFonts(t),e.setCallbacks({}),e.on("storyOpenedInternal",(e=>{var t;return null===(t=this.storyListInstance)||void 0===t?void 0:t.onStoryOpened(e)})),e.on("setStoryOpened",(async t=>{if(!D(ws.getState().user_key)){let e=`u/${ws.getState().user_key}/s_opened`,r=await this.localStorageGetArray(e);E(r)||(r=[]),r.push(t.id),r=[...new Set(r)],this.localStorageSetArray(e,r)}Ws({id:t.id}),e.rpcCb({requestId:t.__cb.id,success:!0,data:t,err:""})})),e.on("updateStoryFavorite",(async t=>{let r=!1,s={favorite:void 0},i="";try{let e=await Ss.post(`story-favorite/${t.id}`,{value:t.favorite});void 0!==e.data.favorite?(r=!0,s.favorite=Boolean(e.data.favorite),Bs({id:t.id,favorite:s.favorite}),Ys(!1===s.favorite?{storiesIdsUserEntity:As.FAVORITE,storyList:xs.getState().filter((e=>e.id!==t.id))}:{storiesIdsUserEntity:As.FAVORITE,storyList:[...xs.getState(),...Es.getState().filter((e=>e.id===t.id))]})):i="response.data.favorite is undefined"}catch(e){i=e.toString()}e.rpcCb({requestId:t.__cb.id,success:r,data:s,err:i})})),e.on("updateStoryLike",(async t=>{let r=!1,s={like:void 0},i="";try{let e=await Ss.post(`story-like/${t.id}`,{value:t.like});void 0!==e.data.like?(r=!0,s.like=e.data.like,js({id:t.id,like:s.like})):i="response.data.like is undefined"}catch(e){i=e.toString()}e.rpcCb({requestId:t.__cb.id,success:r,data:s,err:i})})),e.on("getStorySharePath",(async t=>{let r=!1,s={url:void 0},i="";try{let e=await Ss.get(`story-share/${t.id}`);void 0!==e.data.url?(r=!0,s.url=e.data.url):i="response.data.url is undefined"}catch(e){i=e.toString()}e.rpcCb({requestId:t.__cb.id,success:r,data:s,err:i})})),e.on("apiRequest",(async t=>{let r=!1,s="",i={url:t.url,method:t.method};-1!==["post","put","path"].indexOf(t.method)?t.data&&(i.data=t.data):i.params=t.params;let n={};try{let e=await Ss.request(i);n.data=e.data,n.status=e.status,n.headers=e.headers,r=!0}catch(e){n.data=e,n.status=400,n.headers=[{}],s=e.toString()}e.rpcCb({requestId:t.__cb.id,success:r,data:n,err:s})})),e.on("updateStoriesStat",(async t=>{let r=!1,s={},i="";try{let e=await Ss.post("session/update",t.data);void 0!==e.data?(r=!0,s=e.data):i="response.data is undefined"}catch(e){i=e.toString()}e.rpcCb({requestId:t.__cb.id,success:r,data:s,err:i})})),0===e.listenerCount("clickOnButton")&&e.on("clickOnButton",(e=>{(()=>{this.clickOnButtonAction({src:st.STORY_READER,payload:e})})()})),e.on("clickOnSwipeUpGoods",(t=>{e&&(this._goodsWidgetInstance=new li(this,appearanceManager,e,t),this._goodsWidgetInstance.once("close",(t=>{this._goodsWidgetInstance=null,e&&e.closeGoodsWidget(t)})))})),e.on("openedStoryReader",(()=>{this.showStoryReaderLoader(!1)})),e.on("openStoryReader",(()=>{})),e.on("closeStoryReader",(()=>{var t;null===(t=hi.instance)||void 0===t||t.closeGoodsWidget(),null!=this._storyReaderDetachComponent&&this._storyReaderDetachComponent(e),this.storyReaderInstancePromise=null,this._storyReaderInstance=null,this.showStoryReaderLoader(!1),e.emit("modalClosed")})),["showSlide","showStory","closeStory","clickOnButton","likeStory","dislikeStory","favoriteStory","shareStory","shareStoryWithPath"].forEach((t=>e.on(t,(r=>{let s=e.sourceInfo.listType,i=e.sourceInfo.feed,n={title:null,tags:[],slidesCount:null,feed:null,source:null},o=Es.getState().find((e=>e.id===r.id));if(o&&(n.title=o.title,n.tags=o.tags,n.slidesCount=o.slides_count),n.feed=i,s===at.direct?n.source=nt.direct:s===at.default?n.source=nt.list:s===at.onboarding?n.source=nt.onboarding:s===at.favorite&&(n.source=nt.favorite),null!=r.index&&(r.payload=null,o&&o.slides_payload&&Array.isArray(o.slides_payload))){let e=o.slides_payload.find((e=>e.slide_index===r.index));null!=e&&e.payload&&(r.payload=e.payload)}this.emit(t,{...r,...n})})))),e.on("changeSoundOnInternal",(e=>{let{value:t}=e;this.emit("soundOnChangedByUser",{value:t})})),e}completeInitStoryFavoriteReader(e,t){return e.setFonts(t),e.setCallbacks({}),e.on("openedStoryFavoriteReader",(()=>{this.showStoryFavoriteReaderLoader(!1)})),e.on("clickOnStoryInternal",(t=>{let r={title:null,tags:[],slidesCount:null,feed:null,source:null},s=Es.getState().find((e=>e.id===t.id));s&&(r.title=s.title,r.tags=s.tags,r.slidesCount=s.slides_count),r.feed=e.sourceInfo.feed,r.source=nt.favorite,this.emit("clickOnStory",{id:t.id,index:t.index,isDeeplink:t.isDeeplink,...r}),this.handleClickOnStoryInternal(t,e.sourceInfo.feed)})),e.on("closeStoryFavoriteReader",(()=>{null!=this._storyFavoriteReaderDetachComponent&&this._storyFavoriteReaderDetachComponent(e),this.storyFavoriteReaderInstancePromise=null,this._storyFavoriteReaderInstance=null,this.showStoryFavoriteReaderLoader(!1),e.emit("modalClosed")})),e}async showOnboardingStories(e,t){let r="onboarding";t&&t.feed&&H(t.feed)&&(r=t.feed);let s={feed:r,defaultListLength:0,favoriteListLength:0,success:!0,error:{name:"",networkStatus:200,networkMessage:""}};try{await Gs({defaultList:!1,onboardingList:r,favoriteList:!1,onboardingTags:t?t.customTags:void 0,limit:t?t.limit:void 0}),s.feed=r,s.success=!0,s.error=null,s.defaultListLength=di(at.onboarding,r).length}catch(e){s.feed=r,s.success=!1,s.error={name:e.name,networkMessage:e.networkMessage,networkStatus:e.networkStatus}}let i=di(at.onboarding,r);if(i.length>0){let e={windowReferer:ot.default,listType:at.onboarding,id:i[0].id};return await this.handleClickOnStoryInternal(e,r),s}return s}async showStory(e,t,r){let s,i=!1;try{this.emit("openStoryReader",{}),this.showStoryReaderLoader(!0),await ri({id:e}),s=await this.getStoryReaderInstance(),s.emit("openStoryReader",{}),i=await ui(e,s,this.getDevicePlatform(),this.soundOn)}catch(e){i=!1}return i||(this.showStoryReaderLoader(!1),s&&s.closeStoryReaderOrLoader()),{loaded:i}}async closeStoryReader(){if(null===this.storyReaderInstancePromise)return!1;let e=await this.getStoryReaderInstance();this.closeGoodsWidget(),e.closeStoryReaderOrLoader()}closeGoodsWidget(){this._goodsWidgetInstance&&(this._goodsWidgetInstance.close(),this._goodsWidgetInstance=null)}set androidDefaultWindowSoftInputMode(e){this._androidDefaultWindowSoftInputMode=e}get sdkVersionName(){return"0.3.15"}get sdkVersionCode(){return parseInt(315)}}let pi;var fi;hi.instance=void 0,(e=>{e.CSS="text/css",e.JS="text/javascript",e.HTML="text/html"})(pi||(pi={})),(e=>{e.START_LOADER="startLoader",e.END_LOADER="endLoader"})(fi||(fi={}));class gi extends o{get loaderContainer(){return this._loaderContainer}setCallbacks(e){this.callbacks=e}constructor(){super(),this.widgetId=void 0,this.callbacks={},this.obj=void 0,this._loaderContainer=null}async init(e,t){}loading(e,t){}startLoader(){let e=(e=>{let t=window.isSecureContext;return void 0===t&&'https:'===window.location.protocol&&(t=!0),t?e:e.replace(/^https:\/\//,'http://')})(`${process.env.BASE_URL}/v0.3.15/dist/images/loader.gif`);this.loaderContainer.style.background=`url("${e}") center center no-repeat transparent`}stopLoader(){this.loaderContainer.style.background='none'}getGeneratedPageURL(e){let{html:t,css:r,js:s}=e,i='',n='';null!==r&&(i=`<link rel="stylesheet" type="text/css" href="${$(r,pi.CSS)}" />`),null!==s&&(n=`<script >${$(s,pi.JS)}</script>`);let o=`\n    <html>\n      <head>\n        <meta name="viewport" content="width=device-width, initial-scale=1">\n        ${i}\n        ${n}\n      </head>\n      <body>\n        ${t||''}\n      </body>\n    </html>\n  `;null!==r&&(i=`<style>${r}</style>`),null!==s&&(n=`<script>${s}</script>`);let a=`\n    <html>\n      <head>\n        <meta name="viewport" content="width=device-width, initial-scale=1">\n        ${i}\n        ${n}\n      </head>\n      <body>\n        ${t||''}\n      </body>\n    </html>\n        `;return{src:$(o,pi.HTML),srcdoc:a}}getWidgetDocument(e){return''}destroy(e,t){var r=gi.RPC[e];r||r.destroy(),obj.innerHTML=''}}gi.count=0,gi.RPC={};class mi{}mi.version='v1',mi.MD5=e=>{var t=(e,t)=>{var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r},r=(e,r,s,i,n,o)=>t(((e,t)=>e<<t|e>>>32-t)(t(t(r,e),t(i,o)),n),s),s=(e,t,s,i,n,o,a)=>r(t&s|~t&i,e,t,n,o,a),i=(e,t,s,i,n,o,a)=>r(t&i|s&~i,e,t,n,o,a),n=(e,t,s,i,n,o,a)=>r(t^s^i,e,t,n,o,a),o=(e,t,s,i,n,o,a)=>r(s^(t|~i),e,t,n,o,a);return(e=>{for(var t,r="0123456789abcdef",s="",i=0,n=e.length;i<n;i++)t=e.charCodeAt(i),s+=r.charAt(t>>>4&15)+r.charAt(15&t);return s})((e=>(e=>{for(var t="",r=0,s=32*e.length;r<s;r+=8)t+=String.fromCharCode(e[r>>5]>>>r%32&255);return t})(((e,r)=>{var a,l,d,c,u=1732584193,h=-271733879,p=-1732584194,f=271733878;e[r>>5]|=128<<r%32,e[14+(r+64>>>9<<4)]=r;for(var g=0,m=e.length;g<m;g+=16)a=u,l=h,d=p,c=f,u=s(u,h,p,f,e[g+0],7,-680876936),f=s(f,u,h,p,e[g+1],12,-389564586),p=s(p,f,u,h,e[g+2],17,606105819),h=s(h,p,f,u,e[g+3],22,-1044525330),u=s(u,h,p,f,e[g+4],7,-176418897),f=s(f,u,h,p,e[g+5],12,1200080426),p=s(p,f,u,h,e[g+6],17,-1473231341),h=s(h,p,f,u,e[g+7],22,-45705983),u=s(u,h,p,f,e[g+8],7,1770035416),f=s(f,u,h,p,e[g+9],12,-1958414417),p=s(p,f,u,h,e[g+10],17,-42063),h=s(h,p,f,u,e[g+11],22,-1990404162),u=s(u,h,p,f,e[g+12],7,1804603682),f=s(f,u,h,p,e[g+13],12,-40341101),p=s(p,f,u,h,e[g+14],17,-1502002290),h=s(h,p,f,u,e[g+15],22,1236535329),u=i(u,h,p,f,e[g+1],5,-165796510),f=i(f,u,h,p,e[g+6],9,-1069501632),p=i(p,f,u,h,e[g+11],14,643717713),h=i(h,p,f,u,e[g+0],20,-373897302),u=i(u,h,p,f,e[g+5],5,-701558691),f=i(f,u,h,p,e[g+10],9,38016083),p=i(p,f,u,h,e[g+15],14,-660478335),h=i(h,p,f,u,e[g+4],20,-405537848),u=i(u,h,p,f,e[g+9],5,568446438),f=i(f,u,h,p,e[g+14],9,-1019803690),p=i(p,f,u,h,e[g+3],14,-187363961),h=i(h,p,f,u,e[g+8],20,1163531501),u=i(u,h,p,f,e[g+13],5,-1444681467),f=i(f,u,h,p,e[g+2],9,-51403784),p=i(p,f,u,h,e[g+7],14,1735328473),h=i(h,p,f,u,e[g+12],20,-1926607734),u=n(u,h,p,f,e[g+5],4,-378558),f=n(f,u,h,p,e[g+8],11,-2022574463),p=n(p,f,u,h,e[g+11],16,1839030562),h=n(h,p,f,u,e[g+14],23,-35309556),u=n(u,h,p,f,e[g+1],4,-1530992060),f=n(f,u,h,p,e[g+4],11,1272893353),p=n(p,f,u,h,e[g+7],16,-155497632),h=n(h,p,f,u,e[g+10],23,-1094730640),u=n(u,h,p,f,e[g+13],4,681279174),f=n(f,u,h,p,e[g+0],11,-358537222),p=n(p,f,u,h,e[g+3],16,-722521979),h=n(h,p,f,u,e[g+6],23,76029189),u=n(u,h,p,f,e[g+9],4,-640364487),f=n(f,u,h,p,e[g+12],11,-421815835),p=n(p,f,u,h,e[g+15],16,530742520),h=n(h,p,f,u,e[g+2],23,-995338651),u=o(u,h,p,f,e[g+0],6,-198630844),f=o(f,u,h,p,e[g+7],10,1126891415),p=o(p,f,u,h,e[g+14],15,-1416354905),h=o(h,p,f,u,e[g+5],21,-57434055),u=o(u,h,p,f,e[g+12],6,1700485571),f=o(f,u,h,p,e[g+3],10,-1894986606),p=o(p,f,u,h,e[g+10],15,-1051523),h=o(h,p,f,u,e[g+1],21,-2054922799),u=o(u,h,p,f,e[g+8],6,1873313359),f=o(f,u,h,p,e[g+15],10,-30611744),p=o(p,f,u,h,e[g+6],15,-1560198380),h=o(h,p,f,u,e[g+13],21,1309151649),u=o(u,h,p,f,e[g+4],6,-145523070),f=o(f,u,h,p,e[g+11],10,-1120210379),p=o(p,f,u,h,e[g+2],15,718787259),h=o(h,p,f,u,e[g+9],21,-343485551),u=t(u,a),h=t(h,l),p=t(p,d),f=t(f,c);return[u,h,p,f]})((e=>{var t,r,s=Array(e.length>>2);for(t=0,r=s.length;t<r;t++)s[t]=0;for(t=0,r=8*e.length;t<r;t+=8)s[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return s})(e),8*e.length)))((e=>{for(var t,r,s="",i=-1,n=e.length;++i<n;)t=e.charCodeAt(i),r=i+1<n?e.charCodeAt(i+1):0,55296<=t&&t<=56319&&56320<=r&&r<=57343&&(t=65536+((1023&t)<<10)+(1023&r),i++),t<=127?s+=String.fromCharCode(t):t<=2047?s+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?s+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(s+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return s})(e)))},mi.extend=(e,t,r)=>{for(let s in t)t.hasOwnProperty(s)&&(r||void 0===e[s])&&(e[s]=t[s]);return e},mi._protocol='https:',mi._base_domain='',mi.Widget=gi,mi.xdConnectionCallbacks=void 0,mi.init=void 0,mi._apiKey=void 0,mi.userId=void 0,mi.XDM=void 0,mi._domain=void 0,mi._path=void 0,mi.xdReady=void 0,mi.Observer=void 0,mi._rootId=void 0,mi.Util=void 0,mi.xdConnectionCallbacks?setTimeout((()=>{for(var e;e=mi.xdConnectionCallbacks.pop();)e()}),0):(mi.extend(mi,{version:1,_apiKey:null,_session:null,_domain:{main:mi._protocol+'//sdk-narrator.kiozk.ru/',api:mi._protocol+'//api-narrator.kiozk.ru/'},_path:{login:'authorize',proxy:'fxdm_oauth_proxy.html'},_rootId:'ias_api_transport',_nameTransportPath:'',xdReady:!1}),mi.init=e=>{if(mi._apiKey=null,!e.apiKey)throw Error('IAS_OLD.init() called without an apiKey');return mi._apiKey=e.apiKey,mi.userId=e.userId,!0});const yi="FxDomainWidgetStoriesList",vi=O(`server${yi}`),Si=O(`client${yi}`);let wi,Li,Ci={serverFxDomain:vi,clientFxDomain:Si},bi=Si.effect(yi+"setStories"),Ri=Si.effect(yi+"setFonts"),ki=Si.effect(yi+"checkWebPSupport"),_i=vi.effect(yi+"widgetLoaded"),Oi=vi.effect(yi+"clickOnStoryInternalEvent"),Ii=vi.effect(yi+"clickOnFavoriteCellInternalEvent"),Ei=vi.effect(yi+"flushThumbViewsEvent"),Ai=vi.effect(yi+"clickOnStoryEvent"),Fi=vi.effect(yi+"clickOnStoryDeepLinkEvent"),Mi=vi.effect(yi+"debug");(e=>{e[e.REQUEST=0]="REQUEST",e[e.RESPONSE=1]="RESPONSE"})(wi||(wi={})),(e=>{e[e.SUCCESS=0]="SUCCESS",e[e.ERROR=1]="ERROR"})(Li||(Li={}));let Pi=0;class Ti{constructor(){this.id=++Pi,this.rs=()=>{},this.rj=()=>{},this.req=void 0,xi.set(this.id,this);let e=new Promise(((e,t)=>{this.rs=e,this.rj=t}));e.finally((()=>{xi.delete(this.id)})).catch((()=>{})),this.req=e}}const xi=new Map,Di=new Map;class Hi{constructor(e,t){this.receiverEffects=[],this.senderEffects=[];let r=b();t.onmessage=r,r.watch((e=>{Object(e)===e&&e.sid&&e.id&&((e=>{if(e.type!==wi.RESPONSE)return;let t=xi.get(e.id);if(t)if(e.status===Li.SUCCESS)t.rs(e.result);else{if('raw'in e.error)return void t.rj(e.error.raw);let r=Error('');'name'in e.error&&(r.name=e.error.name),'message'in e.error&&(r.message=e.error.message),'stack'in e.error&&(r.stack=e.error.stack),'code'in e.error&&(r.code=e.error.code),t.rj(r)}})(e),(async(e,t)=>{if(e.type!==wi.REQUEST)return;let r=Di.get(e.sid);r?await r(e.params).then((r=>{t.sendMessage({id:e.id,sid:e.sid,type:wi.RESPONSE,status:Li.SUCCESS,result:r})})).catch((r=>{let s={};r instanceof Error?(s.name=r.name,'code'in r&&(s.code=r.code),'message'in r&&(s.message=r.message),'stack'in r&&(s.stack=r.stack)):s.raw=r,t.sendMessage({id:e.id,sid:e.sid,type:wi.RESPONSE,status:Li.ERROR,error:s})})):t.sendMessage({id:e.id,sid:e.sid,type:wi.RESPONSE,status:Li.ERROR,error:{name:'RemoteFXError',message:`Unknown sid "${e.sid}"`}})})(e,t))})),e.fxReceiverDomain.onCreateEffect((e=>{let t=e.sid||e.shortName;Di.set(t,e),this.receiverEffects.push(t)})),e.fxSenderDomain.onCreateEffect((e=>{e.use((r=>{let s=new Ti;return t.sendMessage({id:s.id,sid:e.sid||e.shortName,type:wi.REQUEST,params:r}),s.req})),this.senderEffects.push(e)}))}destructor(){this.receiverEffects.forEach((e=>Di.delete(e))),this.receiverEffects=[],this.senderEffects.forEach((e=>e.use((e=>e)))),this.senderEffects=[]}}class Ni{constructor(e){this.webview=e,this._destructor=void 0,this.onMessageCb=null,this._destructor=()=>{}}createOnMessage(){return e=>{this.messageListener(e)}}destructor(){this._destructor()}messageListener(t){let r={};try{r=JSON.parse(t.nativeEvent.data)}catch(e){console.error(e)}e(this.onMessageCb)&&this.onMessageCb(r)}sendMessage(e){try{this.webview.postMessage(JSON.stringify(e))}catch(e){console.log(e)}}set onmessage(e){this.onMessageCb=e}}var Bi='undefined'!=typeof globalThis?globalThis:'undefined'!=typeof window?window:'undefined'!=typeof global?global:'undefined'!=typeof self?self:{},ji={exports:{}},Wi={};Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.split=G,Wi.splitBySpaces=e=>G(e,[' ','\n','\t']),Wi.splitByCommas=e=>G(e,[','],{last:!0}),function(e,t){var r=Bi&&Bi.__assign||function(){return r=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var i in t=arguments[r])({}).hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};t.__esModule=!0;var s=Wi;t.default=e=>{var t=s.splitBySpaces(e),i=t.lastIndexOf('!important'),n=-1!==i;n&&t.splice(i,1);var o=t.length;if(o<1||o>4)throw new Error("Cannot parse "+o+" sides");var a=t[0],l=t.slice(1);return((e,t,s,i)=>(void 0===t&&(t=e),void 0===s&&(s=e),void 0===i&&(i=t),r({bottom:s,left:i,right:t,top:e},n?{important:n}:{}))).apply(void 0,[a].concat(l))},t.default.default=e.exports=t.default}(ji,ji.exports);var Ui=q(ji.exports);class $i extends gi{get feedSlug(){return this._feedSlug}get testKey(){return this._testKey}get listLoadStatus(){return this._listLoadStatus}setListLoadStatusField(e,t){this._listLoadStatus[e]=t}constructor(t,r,s,i){super(),this.storiesListOptions=void 0,this._listLoadStatus={feed:"default",defaultListLength:0,favoriteListLength:0,success:!0,error:{name:"",networkStatus:200,networkMessage:""}},this._feedSlug=void 0,this._testKey=void 0,this.appearanceManager=void 0,this.storyManager=void 0,this.rpc=void 0,this.frameName='',this.rpcOnMessage=e=>{this.rpcBridge&&this.rpcBridge(e)},this.rpcBridge=null,this.forUnsubscribe=[],this.appearanceManager=r,this.storyManager=t,this._feedSlug=null!=s?s:"default",this._testKey=i,this.storiesListOptions={...this.calculateListHeight(r.storiesListOptions),hasFavorite:r.commonOptions.hasFavorite},this.widgetId=++gi.count,_i.use((()=>{this.emit("widgetLoaded")})),Oi.use((t=>{var r,s;e(null===(r=this.callbacks)||void 0===r?void 0:r.handleClickOnStoryInternal)&&(null===(s=this.callbacks)||void 0===s||s.handleClickOnStoryInternal(t))})),Ii.use((e=>{this.emit("clickOnFavoriteCellInternal",e)})),Ei.use((t=>{var r,s;e(null===(r=this.callbacks)||void 0===r?void 0:r.handleFlushThumbViews)&&(null===(s=this.callbacks)||void 0===s||s.handleFlushThumbViews(t))})),Ai.use((t=>{var r,s;e(null===(r=this.callbacks)||void 0===r?void 0:r.handleClickOnStory)&&(null===(s=this.callbacks)||void 0===s||s.handleClickOnStory(t))})),Fi.use((t=>{var r,s;e(null===(r=this.callbacks)||void 0===r?void 0:r.handleClickOnStoryDeepLink)&&(null===(s=this.callbacks)||void 0===s||s.handleClickOnStoryDeepLink(t))})),Mi.use((e=>{console.log(e)}))}get widgetSrcFile(){return xe}get widgetEntrypoint(){return`\n      <head>\n        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, shrink-to-fit=no">\n        <meta name="color-scheme" content="dark light">\n        <style type="text/css">${De}</style>\n      </head>\n      <div id="app"><div id="_app"></div></div>\n      <script type="text/javascript">${xe}</script>\n      <script type="text/javascript">\n        window.storiesList = (function () {\n          var self = window.storiesList || {};\n          self._e = self._e || [];\n          self.ready = self.ready || function (f) {self._e.push(f);};\n          return self;\n        }());\n\n        window.storiesList.ready(function () {\n          window.storiesList.init(${JSON.stringify(this.storiesListOptions)});\n        });\n\n      </script>`}async mount(e,t){let r={allowTransparency:!0,overflowTouch:!1,backgroundColor:t.layout.backgroundColor,width:'auto',height:0,pageUrl:'',startHeight:0};r.startHeight=t.layout.height?t.layout.height:t.title?50+t.card.height+t.topPadding+t.bottomPadding+t.bottomMargin:t.card.height+t.topPadding+t.bottomPadding+t.bottomMargin,this.createView(e,r)}createView(e,t){'body'===e||document.querySelector(e)}extend(e,t){for(var r in t)e[r]&&'object'==typeof e[r]?this.extend(e[r],t[r]):e[r]=t[r]}genKey(){for(var e='',t=0;t<5;t++)e+=Math.ceil(15*Math.random()).toString(16);return e}mountView(e,t,r){this.frameName='fXD'+this.genKey();let s=document.createElement('div');s.innerHTML='<iframe name="'+this.frameName+'" '+(r||'')+'></iframe>';let i=s.firstChild,n=this;return setTimeout((()=>{i.frameBorder='0',t&&n.extend(i,t),e.insertBefore(i,e.firstChild)}),0),i}calculateListHeight(e){var t,r;let s={storiesHeight:String((null===(t=e.card)||void 0===t?void 0:t.height)||70),storiesLayoutHeight:String((null===(r=e.layout)||void 0===r?void 0:r.height)||0),storiesListTopPadding:String(null!=e.topPadding?e.topPadding:20),storiesListBottomPadding:String(null!=e.bottomPadding?e.bottomPadding:20),storiesListBottomMargin:String(null!=e.bottomMargin?e.bottomMargin:20)},i=parseFloat(s.storiesHeight),n=i,o=0;if(parseFloat(s.storiesLayoutHeight))o=parseFloat(s.storiesLayoutHeight);else{let t=parseFloat(s.storiesListTopPadding),r=parseFloat(s.storiesListBottomPadding),a=e.card.title;if(o=i+t+r,a.display){let e=a.padding,t={top:0,bottom:0};try{if("number"==typeof e)t.top=e,t.bottom=e;else{let r=Ui(e);t.top=parseFloat(r.top),t.bottom=parseFloat(r.bottom)}}catch(e){console.error(e)}let r=a.lineClamp,s=0;try{let e=(e=>{const t=Z(e,1);return null!==t&&t["font-size"]&&t["font-family"].length?t:null})(a.font);null!=e&&null!=e["line-height"]&&(s=parseFloat(e["line-height"]))}catch(e){console.error(e)}let i=t.top+t.bottom+r*s;o+=i,n+=i}}return null==e.layout.storiesListInnerHeight&&(e.layout.storiesListInnerHeight=n),e.layout.height=o,e}get storiesListDimensions(){return{totalHeight:this.storiesListOptions.layout.height}}get containerOptions(){return{style:{position:'relative',height:parseInt(String(this.storiesListOptions.layout.height)),width:"100%",backgroundColor:"transparent",overflow:"hidden"}}}get viewOptions(){var e,t,r,s;this.frameName||(this.frameName='fXD'+this.genKey());let i={storiesHeight:(null===(e=this.storiesListOptions.card)||void 0===e?void 0:e.height)||70,storiesLayoutHeight:(null===(t=this.storiesListOptions.layout)||void 0===t?void 0:t.height)||0,storiesBackgroundColor:(null===(r=this.storiesListOptions.layout)||void 0===r?void 0:r.backgroundColor)||'transparent',storiesListTopPadding:null!=this.storiesListOptions.topPadding?this.storiesListOptions.topPadding:20,storiesListBottomPadding:null!=this.storiesListOptions.bottomPadding?this.storiesListOptions.bottomPadding:20,storiesListBottomMargin:null!=this.storiesListOptions.bottomMargin?this.storiesListOptions.bottomMargin:20,storiesTitle:(null===(s=this.storiesListOptions.title)||void 0===s?void 0:s.content)||'',extraCss:this.storiesListOptions.extraCss||null,extraJs:null},n={maxWidth:0,startHeight:70,storiesHeight:70,minWidth:150,scrolling:!1,hidden:!1};n.startHeight=i.storiesLayoutHeight?parseFloat(i.storiesLayoutHeight):i.storiesTitle?50+parseFloat(i.storiesHeight||n.storiesHeight)+parseFloat(i.storiesListTopPadding)+parseFloat(i.storiesListBottomPadding)+parseFloat(i.storiesListBottomMargin):parseFloat(i.storiesHeight||n.storiesHeight)+parseFloat(i.storiesListTopPadding)+parseFloat(i.storiesListBottomPadding)+parseFloat(i.storiesListBottomMargin);let o=parseInt(0,10),a=o?Math.max(n.minWidth,Math.min(1e4,o))+'px':'100%';return Boolean(!0).toString(),-1!=a.indexOf('%')||parseInt(a),{style:{width:'100%',height:parseInt(String(this.storiesListOptions.layout.height)),backgroundColor:"transparent"},source:{html:this.widgetEntrypoint,baseUrl:'https://sdk.inappstory.com'},onMessage:this.rpcOnMessage}}createRpcServer(e){let t=new Ni(e);this.rpcBridge=t.createOnMessage(),V(Ci,t)}async init(e,t){var r,s,i,n;let o={storiesHeight:(null===(r=t.card)||void 0===r?void 0:r.height)||70,storiesLayoutHeight:(null===(s=t.layout)||void 0===s?void 0:s.height)||0,storiesBackgroundColor:(null===(i=t.layout)||void 0===i?void 0:i.backgroundColor)||'transparent',storiesListTopPadding:t.topPadding||20,storiesListBottomPadding:t.bottomPadding||20,storiesListBottomMargin:t.bottomMargin||20,storiesTitle:(null===(n=t.title)||void 0===n?void 0:n.content)||'',extraCss:t.extraCss||null,extraJs:null},a={allowTransparency:!0,overflowTouch:!1};a.backgroundColor=o.storiesBackgroundColor;var l={startHeight:70,minWidth:150,storiesHeight:70};l.startHeight=o.storiesLayoutHeight?parseFloat(o.storiesLayoutHeight):o.storiesTitle?50+parseFloat(o.storiesHeight||l.storiesHeight)+parseFloat(o.storiesListTopPadding)+parseFloat(o.storiesListBottomPadding)+parseFloat(o.storiesListBottomMargin):parseFloat(o.storiesHeight||l.storiesHeight)+parseFloat(o.storiesListTopPadding)+parseFloat(o.storiesListBottomPadding)+parseFloat(o.storiesListBottomMargin),document.querySelector('body'),document.querySelector('html');let d=this,c={event:(e,t)=>{d.emit(e,t)}};return o.extraJs=null,a.no_finish_loading=!0,this._init(e,a,o,t,c,l,(()=>{}),null,null)}getWidgetDocument(e){let t=`${process.env.BASE_URL}/v0.3.15/dist/js/storiesList.js`;return t=xe,`\n        <script type="text/javascript" src="${t}"></script>\n        <div id="app"><div id="_app"></div></div>\n        <script type="text/javascript">\n          window.storiesList.init(${JSON.stringify(e)});\n        </script>\n`}async _init(t,r,s,i,n,o,a,l,d){n.event=(e,t)=>this.emit(e,t);let c=super._init(t,r,s,i,n,o,((e,t,r)=>{this.rpc=r}),l,d);return this.on('clickOnStoryInternal',(t=>{var r,s;e(null===(r=this.callbacks)||void 0===r?void 0:r.handleClickOnStoryInternal)&&(null===(s=this.callbacks)||void 0===s||s.handleClickOnStoryInternal(t))})),this.on('flushThumbViews',(t=>{var r,s;e(null===(r=this.callbacks)||void 0===r?void 0:r.handleFlushThumbViews)&&(null===(s=this.callbacks)||void 0===s||s.handleFlushThumbViews(t))})),this.on('clickOnStory',(t=>{var r,s;e(null===(r=this.callbacks)||void 0===r?void 0:r.handleClickOnStory)&&(null===(s=this.callbacks)||void 0===s||s.handleClickOnStory(t))})),this.on('clickOnStoryDeepLink',(t=>{var r,s;e(null===(r=this.callbacks)||void 0===r?void 0:r.handleClickOnStoryDeepLink)&&(null===(s=this.callbacks)||void 0===s||s.handleClickOnStoryDeepLink(t))})),this.on('syncStore',(()=>{})),c}onStoryOpened(e){this.rpc.callMethod('onStoryOpened',e)}syncStoreHandle(e){this.rpc.callMethod('onSyncStore',e)}setStories(e){bi(e)}setFonts(e){Ri(e)}checkWebPSupport(){return ki()}destructor(){this.forUnsubscribe.map((e=>e())),this.forUnsubscribe=[]}async load(){try{return await this.storyManager.loadStoriesListData(this,this.appearanceManager)}catch(e){throw Error(e)}}async reload(){try{return await this.storyManager.loadStoriesListData(this,this.appearanceManager)}catch(e){throw Error(e)}}}let Vi,qi;(e=>{e.LEFT="left",e.RIGHT="right"})(Vi||(Vi={})),(e=>{e.FLAT="flat",e.COVER="cover",e.CUBE="cube"})(qi||(qi={}));const Gi={closeButtonPosition:Vi.RIGHT,scrollStyle:qi.FLAT,loader:{default:{color:null,accentColor:null},custom:null},recycleStoriesList:!1,closeOnLastSlideByTimer:!0,faviconApiUrl:"",slideBorderRadius:0},Ki={hasFavorite:!1,hasLike:!1,hasLikeButton:!0,hasDislikeButton:!0,hasShare:!1},Ji="FxDomainWidgetStory",Zi=O(`server${Ji}`),zi=O(`client${Ji}`);let Xi={serverFxDomain:Zi,clientFxDomain:zi},Yi=zi.effect(Ji+"setStories"),Qi=zi.effect(Ji+"setFonts"),en=zi.effect(Ji+"setSoundOn"),tn=zi.effect(Ji+"onOpenReader"),rn=zi.effect(Ji+"onCloseReader"),sn=zi.effect(Ji+"onPauseUI"),nn=zi.effect(Ji+"onResumeUI"),on=Zi.effect(Ji+"widgetLoaded"),an=Zi.effect(Ji+"onReaderOpened"),ln=Zi.effect(Ji+"onReaderClosed"),dn=Zi.effect(Ji+"widgetEvent"),cn=zi.effect(Ji+"widgetEventCb"),un=Zi.effect(Ji+"shareStoryInternal"),hn=Zi.effect(Ji+"debug");const pn=Se.create({emptyOverlay:{backgroundColor:'transparent',height:0,position:'absolute',width:0},fullOverlay:{backgroundColor:'transparent',bottom:0,left:0,position:'absolute',right:0,top:0}});class fn extends he.Component{constructor(...e){super(...e),((e,t,r)=>{t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})(this,"state",{fadeAnim:new ke.Value(0),overlayStyle:pn.emptyOverlay})}UNSAFE_componentWillReceiveProps(e){return e.visible&&this.setState({overlayStyle:pn.fullOverlay}),ke.timing(this.state.fadeAnim,{toValue:e.visible?1:0,duration:300,useNativeDriver:!1}).start(this.onAnimatedEnd.bind(this))}onAnimatedEnd(){this.props.visible||this.setState({overlayStyle:pn.emptyOverlay})}render(){return he.createElement(ke.View,{style:[this.state.overlayStyle,{opacity:this.state.fadeAnim}]},this.props.children)}}class gn extends he.Component{constructor(...e){super(...e),((e,t,r)=>{t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})(this,"state",{bottom:new ke.Value(-300)})}UNSAFE_componentWillReceiveProps(e){return ke.timing(this.state.bottom,{toValue:e.visible?0:-300,duration:300,useNativeDriver:!1}).start()}render(){return he.createElement(ke.View,{style:{bottom:this.state.bottom}},this.props.children)}}const mn=Se.create({button:{backgroundColor:'white',flexDirection:'row',height:50,padding:10},buttonText:{color:'#2c2c2c',fontSize:16,fontWeight:'bold',textAlign:'left',textAlignVertical:'center'},icon:{height:28,marginLeft:10,marginRight:30,width:28}}),yn=Se.create({actionSheetContainer:{backgroundColor:'rgba(0, 0, 0, 0.5)',flex:1,justifyContent:'flex-end',paddingBottom:0,paddingTop:10},buttonContainer:{backgroundColor:'white',overflow:'hidden',paddingBottom:5,paddingTop:5},button:{flex:1}}),vn=('string'==typeof ve.Version?parseInt(ve.Version,10):ve.Version)<19,Sn=async e=>{if((e.url||e.urls)&&'android'===ve.OS){const t=e.urls||(e.url?[e.url]:[]);try{if(!(await Promise.all(t.map((e=>new Promise(((t,r)=>{Ae.RNShare.isBase64File(e,(e=>{r(e)}),(e=>{t(e)}))})))))).includes(!0))return Promise.resolve(!0);if(await Fe.check(Fe.PERMISSIONS.WRITE_EXTERNAL_STORAGE))return Promise.resolve(!0);if(vn){if(await Fe.request(Fe.PERMISSIONS.WRITE_EXTERNAL_STORAGE)===Fe.RESULTS.GRANTED)return Promise.resolve(!0);throw new Error('Write Permission not available')}}catch(e){return Promise.reject(e)}}return Promise.resolve(!0)};let wn,Ln;(e=>{e.Facebook="facebook",e.FacebookStories="facebookstories",e.Pagesmanager="pagesmanager",e.Twitter="twitter",e.Whatsapp="whatsapp",e.Whatsappbusiness="whatsappbusiness",e.Instagram="instagram",e.InstagramStories="instagramstories",e.Googleplus="googleplus",e.Email="email",e.Pinterest="pinterest",e.Linkedin="linkedin",e.Sms="sms",e.Telegram="telegram",e.Snapchat="snapchat",e.Messenger="messenger"})(wn||(wn={})),(e=>{e.BackgroundImage="shareBackgroundImage",e.BackgroundVideo="shareBackgroundVideo",e.StickerImage="shareStickerImage",e.BackgroundAndStickerImage="shareBackgroundAndStickerImage"})(Ln||(Ln={}));const Cn={Button:({buttonStyle:e,onPress:t,iconSrc:r,textStyle:s,children:i})=>he.createElement(_e,{activeOpacity:.5,style:[mn.button,e],onPress:t},he.createElement(Oe,{style:mn.icon,source:r}),he.createElement(Ie,{style:[mn.buttonText,s]},i)),ShareSheet:class extends he.Component{componentDidMount(){this.backButtonHandler=this.backButtonHandler.bind(this),Ee.addEventListener('hardwareBackPress',this.backButtonHandler)}componentWillUnmount(){Ee.removeEventListener('hardwareBackPress',this.backButtonHandler)}backButtonHandler(){return!!this.props.visible&&(this.props.onCancel(),!0)}render(){const{style:e={},overlayStyle:t={},...r}=this.props;return he.createElement(fn,r,he.createElement(Le,{style:[yn.actionSheetContainer,t]},he.createElement(_e,{style:yn.button,onPress:this.props.onCancel}),he.createElement(gn,{visible:this.props.visible},he.createElement(Le,{style:[yn.buttonContainer,e]},this.props.children))))}},Overlay:fn,Sheet:gn,Social:{FACEBOOK:Ae.RNShare.FACEBOOK||wn.Facebook,FACEBOOK_STORIES:Ae.RNShare.FACEBOOKSTORIES||wn.FacebookStories,PAGESMANAGER:Ae.RNShare.PAGESMANAGER||wn.Pagesmanager,TWITTER:Ae.RNShare.TWITTER||wn.Twitter,WHATSAPP:Ae.RNShare.WHATSAPP||wn.Whatsapp,WHATSAPPBUSINESS:Ae.RNShare.WHATSAPPBUSINESS||wn.Whatsappbusiness,INSTAGRAM:Ae.RNShare.INSTAGRAM||wn.Instagram,INSTAGRAM_STORIES:Ae.RNShare.INSTAGRAMSTORIES||wn.InstagramStories,GOOGLEPLUS:Ae.RNShare.GOOGLEPLUS||wn.Googleplus,EMAIL:Ae.RNShare.EMAIL||wn.Email,PINTEREST:Ae.RNShare.PINTEREST||wn.Pinterest,LINKEDIN:Ae.RNShare.LINKEDIN||wn.Linkedin,SMS:Ae.RNShare.SMS||wn.Sms,TELEGRAM:Ae.RNShare.TELEGRAM||wn.Telegram,MESSENGER:Ae.RNShare.MESSENGER||wn.Messenger,SNAPCHAT:Ae.RNShare.SNAPCHAT||wn.Snapchat},open:e=>new Promise(((t,r)=>{Sn(e).then((()=>{if('ios'===ve.OS&&e.url&&!e.urls){const t=e.url;delete e.url,e.urls=[t],e.filename&&!e.filenames&&(e.filenames=[e.filename],delete e.filename)}Ae.RNShare.open(e,(e=>r({error:e})),((s,i)=>s?t({success:s,message:i}):!1===e.failOnCancel?t({dismissedAction:!0,success:s,message:i}):void r(new Error('User did not share'))))})).catch((e=>r(e)))})),shareSingle(e){if('ios'===ve.OS||'android'===ve.OS)return new Promise(((t,r)=>{Sn(e).then((()=>{Ae.RNShare.shareSingle(e,(e=>r({error:e})),((e,r)=>t({success:e,message:r})))})).catch((e=>r(e)))}));throw new Error('Not implemented')},isPackageInstalled(e){if('android'===ve.OS)return new Promise(((t,r)=>{Ae.RNShare.isPackageInstalled(e,(e=>r({error:e})),(e=>t({isInstalled:e,message:'Package is Installed'})))}));throw new Error('Not implemented')}};class bn{constructor(){this._isOpen=!1,this._isWidgetConnected=!1}set isOpen(e){this._isOpen=e}get isOpen(){return this._isOpen}set isWidgetConnected(e){this._isWidgetConnected=e}get isWidgetConnected(){return this._isWidgetConnected}modalClosed(){this.isWidgetConnected=!1,this.isOpen=!1}}class Rn extends gi{constructor(e,t){void 0===t&&(t={}),super(),this.appearanceManagerGetter=e,this.overrideStoryReaderOptions=t,this.modalPresentation=void 0,this.openStoryReaderWithOptions={},this.rpc=void 0,this.frameName="",this.rpcOnMessage=e=>{this.rpcBridge&&this.rpcBridge(e)},this.rpcBridge=null,this.rpcServerInstance=null,this._sourceInfo={listType:at.default,feed:null},this.modalPresentation=new bn,this.widgetId=++gi.count,on.use((()=>{this.emit("widgetLoaded")})),dn.use((e=>{let{name:t,payload:r}=e;this.emit(t,r)})),an.use((e=>{this.emit("openedStoryReader",e)})),ln.use((e=>{this.emit("closeStoryReader",e)})),un.use((async e=>{let t=!1,r={};sn(),e.url?r={message:e.text,url:e.url}:e.files&&Array.isArray(e.files)&&(r={urls:e.files});try{let e=await Cn.open(r);A(e)&&(!0===(s=e.success)||!1===s)&&(t=e.success)}catch(e){t=!1}finally{nn()}var s})),dn.use((e=>{let{name:t,payload:r}=e;this.emit(t,r)})),hn.use((e=>{console.log(e)}));let r=()=>this.closeStoryReaderOrLoader();this.on("openStoryReader",(e=>{this.modalPresentation.isOpen=!0,this.openStoryReaderWithOptions=e,Ee.addEventListener("hardwareBackPress",r)})),this.on("openedStoryReader",(()=>{this.modalPresentation.isWidgetConnected=!0})),this.on("modalClosed",(()=>{Ee.removeEventListener("hardwareBackPress",r),this.modalPresentation.modalClosed()}))}closeStoryReaderOrLoader(){return this.modalPresentation.isWidgetConnected?(this.closeConnectedReaderWidget(),this.modalPresentation.modalClosed(),!0):!!this.modalPresentation.isOpen&&(this.emit("closeStoryReader",this.openStoryReaderWithOptions),!0)}get storyReaderOptions(){let e=this.appearanceManagerGetter();return null!=e?{...e.storyReaderOptions,appearanceCommon:e.commonOptions,...this.overrideStoryReaderOptions,faviconApiUrl:ys.faviconApiUrl}:{...Gi,appearanceCommon:Ki,...this.overrideStoryReaderOptions,faviconApiUrl:ys.faviconApiUrl}}get widgetSrcFile(){return Be}get widgetEntrypoint(){return`\n      <head>\n        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, shrink-to-fit=no">\n        <meta name="color-scheme" content="dark light">\n        <style type="text/css">${je}</style>\n      </head>\n      <div id="app"><div id="_app"></div></div>\n      <script type="text/javascript">${Be}</script>\n      <script type="text/javascript">\n        window.storiesList = (function () {\n          var self = window.storiesList || {};\n          self._e = self._e || [];\n          self.ready = self.ready || function (f) {self._e.push(f);};\n          return self;\n        }());\n\n        window.storyReader.ready(function () {\n          window.storyReader.init(${JSON.stringify(this.storyReaderOptions)});\n        });\n\n      </script>`}async mount(e,t){let r={allowTransparency:!0,overflowTouch:!1,backgroundColor:t.layout.backgroundColor,width:"auto",height:0,pageUrl:"",startHeight:0};r.startHeight=t.layout.height?t.layout.height:t.title?50+t.card.height+t.topPadding+t.bottomPadding+t.bottomMargin:t.card.height+t.topPadding+t.bottomPadding+t.bottomMargin,this.createView(e,r)}createView(e,t){"body"===e||document.querySelector(e)}extend(e,t){for(var r in t)e[r]&&"object"==typeof e[r]?this.extend(e[r],t[r]):e[r]=t[r]}genKey(){for(var e="",t=0;t<5;t++)e+=Math.ceil(15*Math.random()).toString(16);return e}mountView(e,t,r){this.frameName="fXD"+this.genKey();let s=document.createElement("div");s.innerHTML='<iframe name="'+this.frameName+'" '+(r||"")+"></iframe>";let i=s.firstChild,n=this;return setTimeout((()=>{i.frameBorder="0",t&&n.extend(i,t),e.insertBefore(i,e.firstChild)}),0),i}get containerOptions(){return{style:{backgroundColor:"transparent",position:"relative",height:"100%",width:"100%"}}}get viewOptions(){this.frameName||(this.frameName="fXD"+this.genKey());let e={extraCss:null,extraJs:null},t={maxWidth:0,startHeight:70,storiesHeight:70,minWidth:150,scrolling:!1,hidden:!1};t.startHeight=e.storiesLayoutHeight?parseFloat(e.storiesLayoutHeight):e.storiesTitle?50+parseFloat(e.storiesHeight||t.storiesHeight)+parseFloat(e.storiesListTopPadding)+parseFloat(e.storiesListBottomPadding)+parseFloat(e.storiesListBottomMargin):parseFloat(e.storiesHeight||t.storiesHeight)+parseFloat(e.storiesListTopPadding)+parseFloat(e.storiesListBottomPadding)+parseFloat(e.storiesListBottomMargin);let r=parseInt("100%",10),s=r?Math.max(t.minWidth,Math.min(1e4,r))+"px":"100%";return Boolean(!0).toString(),-1!=s.indexOf("%")||parseInt(s),{style:{backgroundColor:"transparent",position:"absolute",left:0,right:0,top:0,height:"100%",width:"100%"},source:{html:this.widgetEntrypoint,baseUrl:"https://sdk.inappstory.com"},onMessage:this.rpcOnMessage}}createRpcServer(e){let t=new Ni(e);this.rpcBridge=t.createOnMessage(),this.rpcServerInstance=V(Xi,t)}destroyRpcServer(){this.rpcServerInstance&&this.rpcServerInstance.destructor()}async init(e,t){var r,s,i,n;let o={storiesHeight:(null===(r=t.card)||void 0===r?void 0:r.height)||70,storiesLayoutHeight:(null===(s=t.layout)||void 0===s?void 0:s.height)||0,storiesBackgroundColor:(null===(i=t.layout)||void 0===i?void 0:i.backgroundColor)||"transparent",storiesListTopPadding:t.topPadding||20,storiesListBottomPadding:t.bottomPadding||20,storiesListBottomMargin:t.bottomMargin||20,storiesTitle:(null===(n=t.title)||void 0===n?void 0:n.content)||"",extraCss:t.extraCss||null,extraJs:null},a={allowTransparency:!0,overflowTouch:!1};a.backgroundColor=o.storiesBackgroundColor;var l={startHeight:70,minWidth:150,storiesHeight:70};l.startHeight=o.storiesLayoutHeight?parseFloat(o.storiesLayoutHeight):o.storiesTitle?50+parseFloat(o.storiesHeight||l.storiesHeight)+parseFloat(o.storiesListTopPadding)+parseFloat(o.storiesListBottomPadding)+parseFloat(o.storiesListBottomMargin):parseFloat(o.storiesHeight||l.storiesHeight)+parseFloat(o.storiesListTopPadding)+parseFloat(o.storiesListBottomPadding)+parseFloat(o.storiesListBottomMargin),document.querySelector("body"),document.querySelector("html");let d=this,c={event:(e,t)=>{d.emit(e,t)}};return o.extraJs=null,a.no_finish_loading=!0,this._init(e,a,o,t,c,l,(()=>{}),null,null)}getWidgetDocument(e){let t=`${process.env.BASE_URL}/v0.3.15/dist/js/storiesList.js`;return t=Be,`\n        <script type="text/javascript" src="${t}"></script>\n        <div id="app"><div id="_app"></div></div>\n        <script type="text/javascript">\n          window.storyReader.init(${JSON.stringify(e)});\n        </script>\n`}async _init(t,r,s,i,n,o,a,l,d){n.event=(e,t)=>this.emit(e,t);let c=super._init(t,r,s,i,n,o,((e,t,r)=>{this.rpc=r}),l,d);return this.on("clickOnStory",(t=>{var r,s;e(null===(r=this.callbacks)||void 0===r?void 0:r.handleClickOnStory)&&(null===(s=this.callbacks)||void 0===s||s.handleClickOnStory(t))})),this.on("clickOnStoryDeepLink",(t=>{var r,s;e(null===(r=this.callbacks)||void 0===r?void 0:r.handleClickOnStoryDeepLink)&&(null===(s=this.callbacks)||void 0===s||s.handleClickOnStoryDeepLink(t))})),this.on("syncStore",(()=>{})),c}onStoryOpened(e){this.rpc.callMethod("onStoryOpened",e)}syncStoreHandle(e){this.rpc.callMethod("onSyncStore",e)}get sourceInfo(){return this._sourceInfo}openReader(e,t){this._sourceInfo=t,tn(e)}closeConnectedReaderWidget(){rn()}setStories(e){Yi(e)}setFonts(e){Qi(e)}rpcCb(e){cn(e)}setSoundOn(e){en(e)}destructor(){}}const kn={title:{content:'Favorite',font:'1.4rem/1.2 InternalPrimaryFont',color:"white"}},_n="FxDomainWidgetStoryFavorite",On=O(`server${_n}`),In=O(`client${_n}`);let En={serverFxDomain:On,clientFxDomain:In},An=In.effect(_n+"setStories"),Fn=In.effect(_n+"setFonts"),Mn=In.effect(_n+"onOpenReader"),Pn=In.effect(_n+"onCloseReader"),Tn=On.effect(_n+"widgetLoaded"),xn=On.effect(_n+"onReaderOpened"),Dn=On.effect(_n+"onReaderClosed"),Hn=On.effect(_n+"widgetEvent"),Nn=In.effect(_n+"widgetEventCb"),Bn=On.effect(_n+"clickOnStoryInternalEvent"),jn=On.effect(_n+"debug");class Wn extends gi{constructor(e){super(),this.appearanceManagerGetter=e,this.modalPresentation=void 0,this.openStoryFavoriteReaderWithOptions={},this.rpc=void 0,this.frameName='',this.rpcOnMessage=e=>{this.rpcBridge&&this.rpcBridge(e)},this.rpcBridge=null,this.rpcServerInstance=null,this._sourceInfo={listType:at.default,feed:null},this.modalPresentation=new bn,this.widgetId=++gi.count,Tn.use((()=>{this.emit("widgetLoaded")})),Hn.use((e=>{let{name:t,payload:r}=e;this.emit(t,r)})),xn.use((e=>{this.emit('openedStoryFavoriteReader',e)})),Dn.use((e=>{this.emit('closeStoryFavoriteReader',e)})),Bn.use((e=>{this.emit('clickOnStoryInternal',e)})),Hn.use((e=>{let{name:t,payload:r}=e;this.emit(t,r)})),jn.use((e=>{console.log(e)}));let t=()=>this.modalPresentation.isWidgetConnected?(this.closeConnectedReaderWidget(),this.modalPresentation.modalClosed(),!0):!!this.modalPresentation.isOpen&&(this.emit("closeStoryFavoriteReader",this.openStoryFavoriteReaderWithOptions),!0);this.on('openStoryFavoriteReader',(e=>{this.modalPresentation.isOpen=!0,Ee.addEventListener("hardwareBackPress",t),this.openStoryFavoriteReaderWithOptions=e})),this.on('openedStoryFavoriteReader',(()=>{this.modalPresentation.isWidgetConnected=!0})),this.on('modalClosed',(()=>{Ee.removeEventListener("hardwareBackPress",t),this.modalPresentation.modalClosed()}))}get storyFavoriteReaderOptions(){let e=this.appearanceManagerGetter();return null!=e?{options:e.storyFavoriteReaderOptions,storiesListOptions:e.storiesListOptions}:{options:kn,storiesListOptions:Qe}}get widgetSrcFile(){return We}get widgetEntrypoint(){return`\n      <head>\n        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, shrink-to-fit=no">\n        <meta name="color-scheme" content="dark light">\n        <style type="text/css">${Ue}</style>\n      </head>\n      <div id="app"><div id="_app"></div></div>\n      <script type="text/javascript">${We}</script>\n      <script type="text/javascript">\n        window.storiesList = (function () {\n          var self = window.storiesList || {};\n          self._e = self._e || [];\n          self.ready = self.ready || function (f) {self._e.push(f);};\n          return self;\n        }());\n\n        window.storyFavoriteReader.ready(function () {\n          window.storyFavoriteReader.init(${JSON.stringify(this.storyFavoriteReaderOptions)});\n          // options\n        });\n\n      </script>`}async mount(e,t){let r={allowTransparency:!0,overflowTouch:!1,backgroundColor:t.layout.backgroundColor,width:'auto',height:0,pageUrl:'',startHeight:0};r.startHeight=t.layout.height?t.layout.height:t.title?50+t.card.height+t.topPadding+t.bottomPadding+t.bottomMargin:t.card.height+t.topPadding+t.bottomPadding+t.bottomMargin,this.createView(e,r)}createView(e,t){'body'===e||document.querySelector(e)}extend(e,t){for(var r in t)e[r]&&'object'==typeof e[r]?this.extend(e[r],t[r]):e[r]=t[r]}genKey(){for(var e='',t=0;t<5;t++)e+=Math.ceil(15*Math.random()).toString(16);return e}mountView(e,t,r){this.frameName='fXD'+this.genKey();let s=document.createElement('div');s.innerHTML='<iframe name="'+this.frameName+'" '+(r||'')+'></iframe>';let i=s.firstChild,n=this;return setTimeout((()=>{i.frameBorder='0',t&&n.extend(i,t),e.insertBefore(i,e.firstChild)}),0),i}get containerOptions(){return{style:{backgroundColor:'transparent',position:'relative',height:'100%',width:'100%'}}}get viewOptions(){this.frameName||(this.frameName='fXD'+this.genKey());let e={extraCss:null,extraJs:null},t={maxWidth:0,startHeight:70,storiesHeight:70,minWidth:150,scrolling:!1,hidden:!1};t.startHeight=e.storiesLayoutHeight?parseFloat(e.storiesLayoutHeight):e.storiesTitle?50+parseFloat(e.storiesHeight||t.storiesHeight)+parseFloat(e.storiesListTopPadding)+parseFloat(e.storiesListBottomPadding)+parseFloat(e.storiesListBottomMargin):parseFloat(e.storiesHeight||t.storiesHeight)+parseFloat(e.storiesListTopPadding)+parseFloat(e.storiesListBottomPadding)+parseFloat(e.storiesListBottomMargin);let r=parseInt('100%',10),s=r?Math.max(t.minWidth,Math.min(1e4,r))+'px':'100%';return Boolean(!0).toString(),-1!=s.indexOf('%')||parseInt(s),{style:{backgroundColor:'transparent',position:'absolute',left:0,right:0,top:0,height:"100%",width:'100%'},source:{html:this.widgetEntrypoint,baseUrl:'https://sdk.inappstory.com'},onMessage:this.rpcOnMessage}}createRpcServer(e){let t=new Ni(e);this.rpcBridge=t.createOnMessage(),this.rpcServerInstance=V(En,t)}destroyRpcServer(){this.rpcServerInstance&&this.rpcServerInstance.destructor()}async init(e,t){var r,s,i,n;let o={storiesHeight:(null===(r=t.card)||void 0===r?void 0:r.height)||70,storiesLayoutHeight:(null===(s=t.layout)||void 0===s?void 0:s.height)||0,storiesBackgroundColor:(null===(i=t.layout)||void 0===i?void 0:i.backgroundColor)||'transparent',storiesListTopPadding:t.topPadding||20,storiesListBottomPadding:t.bottomPadding||20,storiesListBottomMargin:t.bottomMargin||20,storiesTitle:(null===(n=t.title)||void 0===n?void 0:n.content)||'',extraCss:t.extraCss||null,extraJs:null},a={allowTransparency:!0,overflowTouch:!1};a.backgroundColor=o.storiesBackgroundColor;var l={startHeight:70,minWidth:150,storiesHeight:70};l.startHeight=o.storiesLayoutHeight?parseFloat(o.storiesLayoutHeight):o.storiesTitle?50+parseFloat(o.storiesHeight||l.storiesHeight)+parseFloat(o.storiesListTopPadding)+parseFloat(o.storiesListBottomPadding)+parseFloat(o.storiesListBottomMargin):parseFloat(o.storiesHeight||l.storiesHeight)+parseFloat(o.storiesListTopPadding)+parseFloat(o.storiesListBottomPadding)+parseFloat(o.storiesListBottomMargin),document.querySelector('body'),document.querySelector('html');let d=this,c={event:(e,t)=>{d.emit(e,t)}};return o.extraJs=null,a.no_finish_loading=!0,this._init(e,a,o,t,c,l,(()=>{}),null,null)}getWidgetDocument(e){let t=`${process.env.BASE_URL}/v0.3.15/dist/js/storiesList.js`;return t=We,`\n        <script type="text/javascript" src="${t}"></script>\n        <div id="app"><div id="_app"></div></div>\n        <script type="text/javascript">\n          window.storyFavoriteReader.init(${JSON.stringify(e)});\n        </script>\n`}async _init(t,r,s,i,n,o,a,l,d){n.event=(e,t)=>this.emit(e,t);let c=super._init(t,r,s,i,n,o,((e,t,r)=>{this.rpc=r}),l,d);return this.on('clickOnStory',(t=>{var r,s;e(null===(r=this.callbacks)||void 0===r?void 0:r.handleClickOnStory)&&(null===(s=this.callbacks)||void 0===s||s.handleClickOnStory(t))})),this.on('clickOnStoryDeepLink',(t=>{var r,s;e(null===(r=this.callbacks)||void 0===r?void 0:r.handleClickOnStoryDeepLink)&&(null===(s=this.callbacks)||void 0===s||s.handleClickOnStoryDeepLink(t))})),this.on('syncStore',(()=>{})),c}onStoryOpened(e){this.rpc.callMethod('onStoryOpened',e)}syncStoreHandle(e){this.rpc.callMethod('onSyncStore',e)}get sourceInfo(){return this._sourceInfo}openReader(e,t){this._sourceInfo=t,Mn(e)}closeConnectedReaderWidget(){Pn()}setStories(e){An(e)}setFonts(e){Fn(e)}rpcCb(e){Nn(e)}destructor(){}}const Un='android'===ve.OS,$n="The package 'rn-android-keyboard-adjust' doesn't seem to be linked. Make sure: \n\n"+ve.select({default:''})+"- You rebuilt the app after installing the package\n- You are not using Expo Go\n",Vn=Ae.RnAndroidKeyboardAdjust?Ae.RnAndroidKeyboardAdjust:new Proxy({},{get(){throw new Error($n)}});var qn={__proto__:null,setAdjustNothing:z,setAdjustPan:X,setAdjustResize:Y,setAdjustUnspecified:Q,setAlwaysHidden:ee,setAlwaysVisible:te,setVisible:re,setHidden:se,setUnchanged:ie,getSoftInputMode:ne,setSoftInputMode:oe,default:{setAdjustNothing:z,setAdjustPan:X,setAdjustResize:Y,setAdjustUnspecified:Q,setAlwaysHidden:ee,setAlwaysVisible:te,setVisible:re,setHidden:se,setUnchanged:ie,getSoftInputMode:ne,setSoftInputMode:oe}};class Gn extends hi{constructor(e,t){super(e,t),this.on("openStoryReader",(()=>{be.setHidden(!0),"android"===this.getDevicePlatform()&&ne((e=>{this._innerAndroidDefaultWindowSoftInputIntegerMode=e,z()}))})),this.on("openStoryFavoriteReader",(()=>{be.setHidden(!0)}))}createWidgetStoriesList(e,t,r){let s=new $i(this,e,t,r);this.appearanceManager=e;let i=new Promise((t=>{s.on("widgetLoaded",(()=>{this._storiesListWidgetLoaded(s,e),t()}))}));return{widget:s,widgetLoadedPromise:i}}loadStoriesListData(e,t){return this._loadStoriesListData(e,t)}createWidgetStoryReader(e,t,r){let s=new Rn((()=>this.appearanceManager));return this.storyReaderNeedFirstRender=e,this.storyReaderNeedLoaderRender=t,this.storyReaderDetachComponent=r,s.on("widgetLoaded",(()=>{this._storyReaderWidgetLoaded(s)})),s}createWidgetStoryFavoriteReader(e,t,r){let s=new Wn((()=>this.appearanceManager));return this.storyFavoriteReaderNeedFirstRender=e,this.storyFavoriteReaderNeedLoaderRender=t,this.storyFavoriteReaderDetachComponent=r,s.on("widgetLoaded",(()=>{this._storyFavoriteReaderWidgetLoaded(s)})),s}getDeviceInfo(e){return new Promise((async e=>{let t=Promise.resolve(He.getUniqueId());e({device_id:await t,platform:this.getDevicePlatform()})}))}getDevicePlatform(){return"Android"===He.getSystemName()?"android":"ios"}getDeviceInformation(){return new Promise((async e=>{let t={sdkVersion:"",applicationBundleId:"",deviceId:"",applicationVersion:"",applicationVersionCode:"",userAgent:""},r=Promise.resolve(He.getUniqueId());t.sdkVersion="0.3.15",t.applicationBundleId=He.getBundleId(),t.deviceId=await r,t.applicationVersion=He.getVersion(),t.applicationVersionCode=He.getBuildNumber(),He.getUserAgent().then((r=>{t.userAgent=`InAppStoryRNSDK/315 ${r} Application/${t.applicationVersionCode} (${t.applicationBundleId} ${t.applicationVersion})`,e(t)}))}))}async localStorageGet(e){try{let t=await Ne.getItem(e);return null!=t?JSON.parse(t):null}catch(e){return console.error(e),null}}async localStorageSet(e,t){try{return void await Ne.setItem(e,JSON.stringify(t))}catch(e){return void console.error(e)}}async localStorageGetArray(e){return this.localStorageGet(e)}async localStorageSetArray(e,t){return this.localStorageSet(e,t)}defaultLinking(e){e&&Me.openURL(e)}completeInitStoryReader(e,t,r){return void 0===r&&(r={}),e.on("closeStoryReader",(e=>{Pe.runAfterInteractions((()=>{"android"===this.getDevicePlatform()&&(null!=this._androidDefaultWindowSoftInputMode&&null!=qn[`set${this._androidDefaultWindowSoftInputMode}`]?qn[`set${this._androidDefaultWindowSoftInputMode}`]():null!=this._innerAndroidDefaultWindowSoftInputIntegerMode&&oe(this._innerAndroidDefaultWindowSoftInputIntegerMode))})),e.windowReferer!==ot.favorite&&Pe.runAfterInteractions((()=>{be.setHidden(!1)}))})),super.completeInitStoryReader(e,t,r)}completeInitStoryFavoriteReader(e,t){return e.on("closeStoryFavoriteReader",(()=>{Pe.runAfterInteractions((()=>{be.setHidden(!1)}))})),super.completeInitStoryFavoriteReader(e,t)}}let Kn,Jn;(e=>{e.LEFT="left",e.RIGHT="right"})(Kn||(Kn={})),(e=>{e.FLAT="flat",e.COVER="cover",e.CUBE="cube"})(Jn||(Jn={}));const Zn={closeButtonPosition:Kn.RIGHT,scrollStyle:Jn.FLAT,loader:{default:{color:"transparent",accentColor:"white"},custom:null},slideBorderRadius:0,recycleStoriesList:!1,closeOnLastSlideByTimer:!0,faviconApiUrl:"",closeButton:{svgSrc:{baseState:"<svg width=\"15\" height=\"15\" viewBox=\"0 0 15 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M6.96425 7.4645L0.142822 0.650209L0.649965 0.143066L7.46425 6.9645L14.2857 0.143066L14.7928 0.650209L7.97139 7.4645L14.7928 14.2859L14.2857 14.7931L7.46425 7.97164L0.649965 14.7931L0.142822 14.2859L6.96425 7.4645Z\" fill=\"white\"/>\n</svg>"}},likeButton:{svgSrc:{baseState:"<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M24.6527 13.0592C24.4045 13.5792 24.109 13.8392 23.7427 13.851C23.9402 14.0899 24.085 14.3678 24.1681 14.6664C24.2754 14.9702 24.3315 15.2897 24.3336 15.6119C24.3348 15.9936 24.2566 16.3714 24.1041 16.7214C23.9515 17.0713 23.7278 17.3858 23.4472 17.6446C23.6473 18.006 23.7492 18.4135 23.7427 18.8264C23.742 19.2612 23.6408 19.6899 23.4472 20.0792C23.2852 20.4586 23.0029 20.7743 22.6436 20.9773C22.6984 21.2896 22.7261 21.6058 22.7263 21.9228C22.7263 23.8255 21.6509 24.771 19.4763 24.771H17.4318C15.451 24.6867 13.4962 24.2878 11.6409 23.5892L11.1563 23.4001L10.5536 23.1873L9.96267 22.9864L9.31267 22.7973L8.75722 22.691C8.58024 22.6764 8.40238 22.6764 8.2254 22.691H7.68176V11.6764H8.27267C8.46193 11.6776 8.64992 11.6456 8.82813 11.5819C9.05683 11.4341 9.2671 11.2595 9.45449 11.0619C9.69085 10.861 9.90358 10.6483 10.1045 10.4592C10.3422 10.2191 10.5671 9.9666 10.7781 9.7028L11.369 8.98189L11.9009 8.28462L12.2909 7.76462C12.9054 6.99644 13.3427 6.47644 13.5909 6.21644C14.0779 5.68876 14.4234 5.04639 14.5954 4.34917C14.8081 3.5928 14.9854 2.88371 15.1154 2.21008C15.1935 1.67828 15.4185 1.17889 15.7654 0.768253C16.1631 0.714621 16.5679 0.758694 16.9447 0.896661C17.3215 1.03463 17.659 1.26233 17.9281 1.56008C18.3401 2.31941 18.5286 3.17988 18.4718 4.04189C18.4115 4.993 18.1581 5.92186 17.7272 6.77189C17.272 7.61247 16.9944 8.5377 16.9118 9.49008H22.8209C23.3921 9.51353 23.9334 9.75175 24.3365 10.1571C24.7398 10.5625 24.9751 11.1051 24.9954 11.6764C24.9759 12.1558 24.8593 12.6261 24.6527 13.0592Z\" stroke=\"white\" stroke-width=\"1.18182\" stroke-miterlimit=\"10\"/>\n<path d=\"M5.90904 11.8184H1.18176V22.4547H5.90904V11.8184Z\" stroke=\"white\" stroke-width=\"1.18182\" stroke-miterlimit=\"10\"/>\n</svg>",activeState:"<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M24.6527 13.0592C24.4045 13.5792 24.109 13.8392 23.7427 13.851C23.9402 14.0899 24.085 14.3678 24.1681 14.6664C24.2754 14.9702 24.3315 15.2897 24.3336 15.6119C24.3348 15.9936 24.2566 16.3714 24.1041 16.7214C23.9515 17.0713 23.7278 17.3858 23.4472 17.6446C23.6473 18.006 23.7492 18.4135 23.7427 18.8264C23.742 19.2612 23.6408 19.6899 23.4472 20.0792C23.2852 20.4586 23.0029 20.7743 22.6436 20.9773C22.6984 21.2896 22.7261 21.6058 22.7263 21.9228C22.7263 23.8255 21.6509 24.771 19.4763 24.771H17.4318C15.451 24.6867 13.4962 24.2878 11.6409 23.5892L11.1563 23.4001L10.5536 23.1873L9.96267 22.9864L9.31267 22.7973L8.75722 22.691C8.58024 22.6764 8.40238 22.6764 8.2254 22.691H7.68176V11.6764H8.27267C8.46193 11.6776 8.64992 11.6456 8.82813 11.5819C9.05683 11.4341 9.2671 11.2595 9.45449 11.0619C9.69085 10.861 9.90358 10.6483 10.1045 10.4592C10.3422 10.2191 10.5671 9.9666 10.7781 9.7028L11.369 8.98189L11.9009 8.28462L12.2909 7.76462C12.9054 6.99644 13.3427 6.47644 13.5909 6.21644C14.0779 5.68876 14.4234 5.04639 14.5954 4.34917C14.8081 3.5928 14.9854 2.88371 15.1154 2.21008C15.1935 1.67828 15.4185 1.17889 15.7654 0.768253C16.1631 0.714621 16.5679 0.758694 16.9447 0.896661C17.3215 1.03463 17.659 1.26233 17.9281 1.56008C18.3401 2.31941 18.5286 3.17988 18.4718 4.04189C18.4115 4.993 18.1581 5.92186 17.7272 6.77189C17.272 7.61247 16.9944 8.5377 16.9118 9.49008H22.8209C23.3921 9.51353 23.9334 9.75175 24.3365 10.1571C24.7398 10.5625 24.9751 11.1051 24.9954 11.6764C24.9759 12.1558 24.8593 12.6261 24.6527 13.0592Z\" fill=\"white\" stroke=\"white\" stroke-width=\"1.18182\" stroke-miterlimit=\"10\"/>\n<path d=\"M5.90904 11.8184H1.18176V22.4547H5.90904V11.8184Z\" fill=\"white\" stroke=\"white\" stroke-width=\"1.18182\" stroke-miterlimit=\"10\"/>\n</svg>"}},dislikeButton:{svgSrc:{baseState:"<svg width=\"27\" height=\"26\" viewBox=\"0 0 27 26\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M1.95728 12.9407C2.20547 12.4207 2.50092 12.1607 2.86728 12.1489C2.67612 11.9058 2.53186 11.6293 2.44183 11.3334C2.34019 11.0282 2.28443 10.7096 2.27637 10.388C2.27385 10.0067 2.35266 9.62916 2.50754 9.28068C2.66242 8.9322 2.88981 8.62075 3.17456 8.36709C2.96718 8.00817 2.86098 7.59974 2.86728 7.18527C2.86805 6.75051 2.96916 6.32181 3.16274 5.93254C3.31795 5.55004 3.59121 5.22709 3.94274 5.01072C3.91641 4.70402 3.91641 4.39561 3.94274 4.0889C3.94274 2.18618 5.01819 1.24072 7.19274 1.24072H9.17819C11.159 1.32494 13.1138 1.72386 14.9691 2.42254L15.4655 2.59981L16.0564 2.81254L16.6591 3.01345L17.2973 3.20254L17.8527 3.3089C18.0297 3.32349 18.2075 3.32349 18.3846 3.3089H18.9282V14.2171H18.3846C18.1756 14.2289 17.9709 14.281 17.7818 14.3707C17.5397 14.497 17.3136 14.6517 17.1082 14.8316L16.4582 15.4344C16.2205 15.6744 15.9956 15.927 15.7846 16.1907L15.1937 16.9116L14.6618 17.6089L14.2718 18.1289C13.6573 18.8971 13.22 19.4171 12.9718 19.6771C12.4848 20.2048 12.1392 20.8471 11.9673 21.5444C11.7546 22.3007 11.5773 23.0098 11.4473 23.6835C11.3757 24.2149 11.1544 24.715 10.8091 25.1253C10.4238 25.1872 10.0292 25.1575 9.65757 25.0384C9.28589 24.9193 8.94755 24.7142 8.67001 24.4398C8.25902 23.6844 8.07052 22.8279 8.12637 21.9698C8.19097 21 8.4566 20.0542 8.90637 19.1926C9.36165 18.3519 9.63922 17.4267 9.72183 16.4744H3.81274C3.5291 16.4711 3.24901 16.4108 2.98914 16.2971C2.72926 16.1834 2.4949 16.0187 2.30001 15.8126C2.08491 15.6264 1.91004 15.3983 1.78609 15.1423C1.66213 14.8862 1.5917 14.6076 1.5791 14.3235C1.6097 13.8416 1.73839 13.371 1.95728 12.9407Z\" stroke=\"white\" stroke-width=\"1.18182\" stroke-miterlimit=\"10\"/>\n<path d=\"M25.4282 3.54541H20.7009V14.1818H25.4282V3.54541Z\" stroke=\"white\" stroke-width=\"1.18182\" stroke-miterlimit=\"10\"/>\n</svg>",activeState:"<svg width=\"27\" height=\"26\" viewBox=\"0 0 27 26\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M1.95728 12.9407C2.20547 12.4207 2.50092 12.1607 2.86728 12.1489C2.67612 11.9058 2.53186 11.6293 2.44183 11.3334C2.34019 11.0282 2.28443 10.7096 2.27637 10.388C2.27385 10.0067 2.35266 9.62916 2.50754 9.28068C2.66242 8.9322 2.88981 8.62075 3.17456 8.36709C2.96718 8.00817 2.86098 7.59974 2.86728 7.18527C2.86805 6.75051 2.96916 6.32181 3.16274 5.93254C3.31795 5.55004 3.59121 5.22709 3.94274 5.01072C3.91641 4.70402 3.91641 4.39561 3.94274 4.0889C3.94274 2.18618 5.01819 1.24072 7.19274 1.24072H9.17819C11.159 1.32494 13.1138 1.72386 14.9691 2.42254L15.4655 2.59981L16.0564 2.81254L16.6591 3.01345L17.2973 3.20254L17.8527 3.3089C18.0297 3.32349 18.2075 3.32349 18.3846 3.3089H18.9282V14.2171H18.3846C18.1756 14.2289 17.9709 14.281 17.7818 14.3707C17.5397 14.497 17.3136 14.6517 17.1082 14.8316L16.4582 15.4344C16.2205 15.6744 15.9956 15.927 15.7846 16.1907L15.1937 16.9116L14.6618 17.6089L14.2718 18.1289C13.6573 18.8971 13.22 19.4171 12.9718 19.6771C12.4848 20.2048 12.1392 20.8471 11.9673 21.5444C11.7546 22.3007 11.5773 23.0098 11.4473 23.6835C11.3757 24.2149 11.1544 24.715 10.8091 25.1253C10.4238 25.1872 10.0292 25.1575 9.65757 25.0384C9.28589 24.9193 8.94755 24.7142 8.67001 24.4398C8.25902 23.6844 8.07052 22.8279 8.12637 21.9698C8.19097 21 8.4566 20.0542 8.90637 19.1926C9.36165 18.3519 9.63922 17.4267 9.72183 16.4744H3.81274C3.5291 16.4711 3.24901 16.4108 2.98914 16.2971C2.72926 16.1834 2.4949 16.0187 2.30001 15.8126C2.08491 15.6264 1.91004 15.3983 1.78609 15.1423C1.66213 14.8862 1.5917 14.6076 1.5791 14.3235C1.6097 13.8416 1.73839 13.371 1.95728 12.9407Z\" fill=\"white\" stroke=\"white\" stroke-width=\"1.18182\" stroke-miterlimit=\"10\"/>\n<path d=\"M25.4282 3.54541H20.7009V14.1818H25.4282V3.54541Z\" fill=\"white\" stroke=\"white\" stroke-width=\"1.18182\" stroke-miterlimit=\"10\"/>\n</svg>"}},favoriteButton:{svgSrc:{baseState:"<svg width=\"22\" height=\"26\" viewBox=\"0 0 22 26\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M17.66 3.81982H4.81116C4.25887 3.81982 3.81116 4.26754 3.81116 4.81982V21.2171C3.81116 22.062 4.83134 22.4865 5.4307 21.8911L11.24 16.1198L17.0401 21.8888C17.6393 22.4847 18.66 22.0603 18.66 21.2152L18.66 4.81983C18.66 4.26754 18.2123 3.81982 17.66 3.81982Z\" stroke=\"white\"/></svg>",activeState:"<svg width=\"22\" height=\"26\" viewBox=\"0 0 22 26\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M17.66 3.81982H4.81116C4.25887 3.81982 3.81116 4.26754 3.81116 4.81982V21.2171C3.81116 22.062 4.83134 22.4865 5.4307 21.8911L11.24 16.1198L17.0401 21.8888C17.6393 22.4847 18.66 22.0603 18.66 21.2152L18.66 4.81983C18.66 4.26754 18.2123 3.81982 17.66 3.81982Z\" fill=\"white\" stroke=\"white\"/></svg>"}},muteButton:{svgSrc:{baseState:"<svg width=\"22\" height=\"26\" viewBox=\"0 0 22 26\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M14.2206 22.3918C14.0256 22.3451 12.4651 21.4429 10.7096 20.3773L7.54973 18.456H5.50554H3.46136L3.2429 18.2693L3.02444 18.0827L3.00883 12.8401C2.98543 7.36426 2.98542 7.35648 3.31312 7.14646C3.43015 7.07646 3.55499 7.16202 4.09334 7.7065C4.69411 8.29764 4.72532 8.34431 4.52246 8.34431H4.3118V12.739V17.1337H5.67719H7.04258V13.8902V10.6389L11.8878 15.4614L16.733 20.2839L16.6939 20.6806C16.5769 21.8707 15.3598 22.7107 14.2206 22.3918Z\" fill=\"white\"/>\n<path d=\"M11.1933 13.3847C5.39627 7.59765 3.89824 6.07312 3.82802 5.83977C3.65637 5.2564 4.24934 4.60303 4.86571 4.7197C5.09198 4.75859 6.23891 5.87088 12.4495 12.0624L19.7602 19.3506V19.7317C19.7602 20.0507 19.7212 20.144 19.4949 20.3696C19.2686 20.5951 19.175 20.634 18.8551 20.634H18.4728L11.1933 13.3847Z\" fill=\"white\"/>\n<path d=\"M12.5196 10.6545L8.35327 6.50095L9.00866 6.11204C9.36756 5.90203 10.6471 5.1242 11.8564 4.40083C13.6587 3.30409 14.1191 3.06297 14.4468 3.0163C15.2894 2.89962 16.2101 3.42077 16.5534 4.21415C16.7172 4.60306 16.7172 4.63417 16.7016 9.70559L16.6782 14.8003L12.5196 10.6545Z\" fill=\"white\"/>\n</svg>",activeState:"<svg width=\"22\" height=\"26\" viewBox=\"0 0 22 26\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M12.0512 22.4247C11.886 22.3646 10.1891 21.4561 8.28942 20.3974L4.83549 18.4677H2.59795H0.367918L0.187713 18.28L0 18.0998V12.7687V7.44518L0.232764 7.24996L0.465529 7.05474H2.67304H4.88805L8.13174 5.23767C9.91877 4.24655 11.5556 3.34552 11.7809 3.24041C12.8246 2.75986 14.1311 3.19535 14.6567 4.19399L14.8669 4.59194V12.7612C14.8669 21.8616 14.9044 21.1858 14.3338 21.809C13.8082 22.3796 12.772 22.6575 12.0512 22.4247ZM13.0874 21.0807C13.4478 20.893 13.4328 21.2233 13.4403 12.7762V4.78716L13.215 4.56191C12.8171 4.16395 12.7195 4.2015 9.07031 6.23631L5.78908 8.06839L5.78157 12.7687V17.4616L9.10034 19.3162C12.5242 21.2308 12.6819 21.2984 13.0874 21.0807ZM4.35495 12.7612V8.33119H2.89078H1.42662V12.7612V17.1912H2.89078H4.35495V12.7612Z\" fill=\"white\"/>\n<path d=\"M19.3045 16.5456C18.9516 16.2528 18.9891 15.9975 19.4471 15.4794C20.1304 14.7135 20.4683 13.9552 20.5434 13.0241C20.626 12.018 20.2355 10.9443 19.4847 10.1333C19.0116 9.61525 18.9591 9.36747 19.2519 9.02958C19.4021 8.85689 19.4922 8.81934 19.785 8.81934C20.1304 8.81934 20.1604 8.84187 20.626 9.33743C21.2041 9.96064 21.7222 10.9593 21.8949 11.7852C22.2328 13.3845 21.6321 15.2767 20.4382 16.3879C19.9727 16.8159 19.6724 16.8535 19.3045 16.5456Z\" fill=\"white\"/>\n<path d=\"M17.2246 14.6384C17.0218 14.5558 16.8191 14.278 16.8191 14.0753C16.8191 13.9927 16.9317 13.7599 17.0744 13.5647C17.5174 12.9415 17.5174 12.5285 17.0744 12.0029C16.9317 11.8377 16.8191 11.635 16.8191 11.5599C16.8191 11.0869 17.3071 10.734 17.7577 10.8841C18.0655 10.9817 18.4334 11.3872 18.6512 11.8527C18.8914 12.3859 18.8689 13.1968 18.5986 13.7524C18.2232 14.5108 17.7201 14.8411 17.2246 14.6384Z\" fill=\"white\"/>\n</svg>"}},shareButton:{svgSrc:{baseState:"<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M14.7727 4.84545C14.7727 5.43636 14.8909 6.02727 15.0091 6.5L8.98182 9.92727C8.03636 8.86364 6.61818 8.15455 5.08182 8.15455C2.36364 8.03636 0 10.2818 0 13C0 15.7182 2.24545 17.8455 5.08182 17.8455C6.61818 17.8455 8.03636 17.1364 8.98182 16.0727L15.0091 19.3818C14.7727 19.8545 14.7727 20.4455 14.7727 21.0364C14.7727 23.7545 17.0182 25.8818 19.8545 25.8818C22.6909 25.8818 24.9364 23.6364 24.9364 21.0364C24.9364 18.3182 22.6909 16.0727 19.8545 16.0727C18.3182 16.0727 16.9 16.7818 15.9545 17.8455L9.92727 14.5364C10.0455 14.1818 10.1636 13.5909 10.1636 13C10.1636 12.4091 10.0455 11.8182 9.92727 11.3455L15.9545 8.03636C16.9 9.1 18.3182 9.80909 19.8545 9.80909C22.6909 9.80909 24.9364 7.56364 24.9364 4.84545C24.9364 2.12727 22.6909 0 19.8545 0C17.0182 0 14.7727 2.24545 14.7727 4.84545ZM5.08182 16.1909C3.30909 16.1909 1.77273 14.7727 1.77273 13C1.77273 11.2273 3.30909 9.80909 5.08182 9.80909C6.85455 9.80909 8.39091 11.2273 8.39091 13C8.39091 14.7727 6.97273 16.1909 5.08182 16.1909ZM19.8545 17.8455C21.6273 17.8455 23.1636 19.2636 23.1636 21.0364C23.1636 22.8091 21.6273 24.2273 19.8545 24.2273C18.0818 24.2273 16.5455 22.8091 16.5455 21.0364C16.5455 19.3818 18.0818 17.8455 19.8545 17.8455ZM19.8545 1.77273C21.6273 1.77273 23.1636 3.19091 23.1636 4.96364C23.1636 6.73636 21.6273 8.15455 19.8545 8.15455C18.0818 8.15455 16.5455 6.73636 16.5455 4.96364C16.5455 3.19091 18.0818 1.77273 19.8545 1.77273Z\" fill=\"white\"/>\n</svg>"}}},zn={title:{content:'\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u0438\u0441\u0442\u043e\u0440\u0438\u0438'}};let Xn;(e=>{e.DEFAULT="default",e.CUSTOM_CARD="customCard",e.CUSTOM_WIDGET="customWidget"})(Xn||(Xn={}));const Yn={goodsWidgetRenderingType:Xn.DEFAULT,loader:{default:{color:null,accentColor:null},custom:null}};var Qn=e=>(e=>!!e&&'object'==typeof e)(e)&&!(e=>{var t={}.toString.call(e);return'[object RegExp]'===t||'[object Date]'===t||(e=>e.$$typeof===eo)(e)})(e),eo='function'==typeof Symbol&&Symbol.for?Symbol.for('react.element'):60103;ue.all=(e,t)=>{if(!Array.isArray(e))throw new Error('first argument should be an array');return e.reduce(((e,r)=>ue(e,r,t)),{})};var to=ue;class ro{constructor(){this._commonOptions=Ki,this._storiesListOptions=Qe,this._storyReaderOptions=Zn,this._storyFavoriteReaderOptions=zn,this._goodsWidgetOptions=Yn}setCommonOptions(e){return this._commonOptions=to(this._commonOptions,e),this}get commonOptions(){return this._commonOptions}setStoriesListOptions(e){return this._storiesListOptions=to(this._storiesListOptions,e),this}get storiesListOptions(){return this._storiesListOptions}setStoryReaderOptions(e){return this._storyReaderOptions=to(this._storyReaderOptions,e),this}get storyReaderOptions(){return this._storyReaderOptions}setStoryFavoriteReaderOptions(e){return this._storyFavoriteReaderOptions=to(this._storyFavoriteReaderOptions,e),this}get storyFavoriteReaderOptions(){return this._storyFavoriteReaderOptions}setGoodsWidgetOptions(e){return this._goodsWidgetOptions=to(this._goodsWidgetOptions,e),this}get goodsWidgetOptions(){return this._goodsWidgetOptions}}let so='undefined'!=typeof window?pe.useLayoutEffect:pe.useEffect;const io=b(),no=R({storyManager:null,appearanceManager:null}).on(io,((e,t)=>t));let oo=(e,t)=>{let r=(e=>{wt.store(e)||(()=>{throw Error('expect useStore argument to be a store')})();let t=e.getState(),r=pe.useReducer((e=>e+1),0)[1],s=pe.useRef({store:e,value:t,pending:0});return so((()=>{let t=e.updates.watch((e=>{let t=s.current;t.pending||(t.value=e,t.pending=1,r(),t.pending=0)})),i=e.getState(),n=s.current;return n.store===e&&n.value!==i&&(n.value=i,n.pending=1,r(),n.pending=0),n.store=e,t}),[e]),t})(no);return(()=>{let s=ye(!0);s.current&&(null!=r.storyManager&&null!=r.appearanceManager||io({storyManager:e(),appearanceManager:t()}),s.current=!1)})(),r};export{rt as AndroidWindowSoftInputMode,ro as AppearanceManager,t as StoriesList,Ze as StoriesListCardTitlePosition,Je as StoriesListCardTitleTextAlign,Xe as StoriesListCardViewVariant,Ye as StoriesListEvents,Ge as StoriesListSliderAlign,Gn as StoryManager,i as StoryReader,Vi as StoryReaderCloseButtonPosition,qi as StoryReaderSwipeStyle,oo as useIas};
//# sourceMappingURL=react-native-ias.mjs.map
